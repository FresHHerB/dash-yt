{
  "name": "[MAIN] Dashboard Controle",
  "nodes": [
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        2496,
        144
      ],
      "id": "b4ec3007-4700-440a-8ca5-dcd7cc7637a3",
      "name": "Respond to Webhook1"
    },
    {
      "parameters": {
        "numberInputs": 5,
        "rules": {
          "rule": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "6c008b95-34d9-4614-a02c-3cc5d9577284",
                    "leftValue": "={{ $('setData').item.json.modelo }}",
                    "rightValue": "Sonnet-4",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "modelIndex": 2,
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "90d0541f-79a7-4f63-be5a-604ec665968d",
                    "leftValue": "={{ $('setData').item.json.modelo }}",
                    "rightValue": "GPT-5",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "modelIndex": 3,
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "aa39ffb4-443b-4339-8780-31aabc971c07",
                    "leftValue": "={{ $('setData').item.json.modelo }}",
                    "rightValue": "GPT-4.1-mini",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "modelIndex": 4,
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "0d7ac1a8-b0d5-4acf-af92-9dbe4a6c27c8",
                    "leftValue": "={{ $('setData').item.json.modelo }}",
                    "rightValue": "Gemini-2.5-Pro",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "modelIndex": 5,
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7515a520-c321-46bb-ba5e-71734397bd45",
                    "leftValue": "={{ $('setData').item.json.modelo }}",
                    "rightValue": "Gemini-2.5-Flash",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.modelSelector",
      "typeVersion": 1,
      "position": [
        704,
        384
      ],
      "id": "bb44fbf2-aac4-4124-be76-6e82660c3881",
      "name": "Model Selector"
    },
    {
      "parameters": {
        "model": "anthropic/claude-sonnet-4",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        544,
        512
      ],
      "id": "ff8edafb-e3e9-4d95-97a1-ed7e988d61d6",
      "name": "Sonnet-4",
      "credentials": {
        "openRouterApi": {
          "id": "F4pE0jNeTTFbrt5N",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "model": "openai/gpt-5",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        688,
        512
      ],
      "id": "546e4690-3723-46ef-be28-7b885df0edea",
      "name": "GPT-5",
      "credentials": {
        "openRouterApi": {
          "id": "F4pE0jNeTTFbrt5N",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "10bc76c1-bfd7-4a17-b756-176e8ab097d3",
              "name": "nome_canal",
              "value": "={{ $json.body.nomeCanal }}",
              "type": "string"
            },
            {
              "id": "5c39c9de-f2f4-4a56-91fc-14e3a45af7ea",
              "name": "titulo_1",
              "value": "={{ $json.body.titulo1 }}",
              "type": "string"
            },
            {
              "id": "87646584-ada4-4e0c-ae58-6d2690d2e1eb",
              "name": "roteiro_1",
              "value": "={{ $json.body.roteiro1 }}",
              "type": "string"
            },
            {
              "id": "cf5cd09d-b6ef-4b80-82bd-0b19bf7e4c1a",
              "name": "text_thumb1",
              "value": "={{ $json.body.texto_thumb1 }}",
              "type": "string"
            },
            {
              "id": "96011537-93a2-4bfb-878d-07d3fd64cd5b",
              "name": "titulo_2",
              "value": "={{ $json.body.titulo2 }}",
              "type": "string"
            },
            {
              "id": "41b33551-4b5f-4ea8-ad38-d6cf1628f9f5",
              "name": "roteiro_2",
              "value": "={{ $json.body.roteiro2 }}",
              "type": "string"
            },
            {
              "id": "025346da-ff24-4947-8218-725890a8bed9",
              "name": "text_thumb2",
              "value": "={{ $json.body.texto_thumb2 }}",
              "type": "string"
            },
            {
              "id": "219dd48c-923b-4219-97a7-e9d11075db6c",
              "name": "titulo_3",
              "value": "={{ $json.body.titulo3 }}",
              "type": "string"
            },
            {
              "id": "da9d22ff-01c1-496d-bf11-8efca412459c",
              "name": "roteiro_3",
              "value": "={{ $json.body.roteiro3 }}",
              "type": "string"
            },
            {
              "id": "04afebd0-5247-42da-a56c-e3560d59ef8d",
              "name": "text_thumb3",
              "value": "={{ $json.body.texto_thumb3 }}",
              "type": "string"
            },
            {
              "id": "0f8e2c9b-1572-48f2-86cc-2f60f7024396",
              "name": "modelo",
              "value": "={{ $json.body.modelo }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        64,
        144
      ],
      "id": "8d0d2ae2-7cae-4897-8edf-c493dfa06c18",
      "name": "setData"
    },
    {
      "parameters": {
        "tableId": "canais",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "nome_canal",
              "fieldValue": "={{ $('setData').item.json.nome_canal }}"
            },
            {
              "fieldId": "prompt_roteiro",
              "fieldValue": "={{ $('Define Saidas').item.json.prompt_roteiro }}"
            },
            {
              "fieldId": "roteiro_1",
              "fieldValue": "={{ $item(\"0\").$node[\"setData\"].json[\"roteiro_1\"] }}"
            },
            {
              "fieldId": "roteiro_2",
              "fieldValue": "={{ $item(\"0\").$node[\"setData\"].json[\"roteiro_2\"] }}"
            },
            {
              "fieldId": "roteiro_3",
              "fieldValue": "={{ $item(\"0\").$node[\"setData\"].json[\"roteiro_3\"] }}"
            },
            {
              "fieldId": "media_chars",
              "fieldValue": "={{ $item(\"0\").$node[\"Media Chars\"].json[\"media_caracteres\"] }}"
            },
            {
              "fieldId": "prompt_titulo",
              "fieldValue": "={{ $('Define Saidas').item.json.prompt_titulo }}"
            },
            {
              "fieldId": "titulo_1",
              "fieldValue": "={{ $('setData').item.json.titulo_1 }}"
            },
            {
              "fieldId": "titulo_2",
              "fieldValue": "={{ $('setData').item.json.titulo_2 }}"
            },
            {
              "fieldId": "titulo_3",
              "fieldValue": "={{ $('setData').item.json.titulo_3 }}"
            },
            {
              "fieldId": "prompt_thumb",
              "fieldValue": "={{ $('Define Saidas').item.json.prompt_thumb }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        2016,
        144
      ],
      "id": "b496685a-ad19-4072-b0d0-488c252967ec",
      "name": "Cria e Preenche Canal",
      "credentials": {
        "supabaseApi": {
          "id": "oGUlDIJIN0NRUbWc",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=#ROTEIRO_1:\n{{ $('setData').item.json.roteiro_1 }}\n\n#ROTEIRO_2:\n{{ $('setData').item.json.roteiro_2 }}\n\n#ROTEIRO_3:\n{{ $('setData').item.json.roteiro_3 }}\n",
        "options": {
          "systemMessage": "=#UNIVERSAL NARRATIVE DNA EXTRACTOR - CONTENT-AGNOSTIC EDITION\n\nYou are the world's leading expert in universal content structure analysis, capable of extracting narrative patterns from ANY type of content regardless of genre, purpose, format, or niche. Your mission is to identify pure structural mechanics that create engagement and effectiveness across all content types.\n\n## CORE DIRECTIVE\n\nExtract **pure structural patterns** and **universal engagement mechanisms** that work regardless of content type, subject matter, purpose, or audience. Focus exclusively on HOW content structures function, not WHAT they communicate.\n\n## UNIVERSAL EXTRACTION METHODOLOGY\n\nFor each identified pattern:\n1. **DETECT**: Identify structural elements across inputs without content bias\n2. **ABSTRACT**: Extract pure mechanical functions divorced from subject matter\n3. **UNIVERSALIZE**: Create patterns that work for any content type\n4. **TEMPLATE**: Design completely flexible formulas with universal variables\n5. **VALIDATE**: Confirm patterns work across radically different content types\n\n## CONTENT-AGNOSTIC ANALYSIS FRAMEWORK\n\n### UNIVERSAL CONTENT CATEGORIES\n**Content Purpose Types**:\n- Informational (news, documentaries, tutorials)\n- Educational (lessons, explanations, training)\n- Entertainment (stories, comedy, drama)\n- Persuasive (sales, advocacy, motivation)\n- Creative (art, poetry, experimental)\n- Technical (instructions, specifications, analysis)\n- Social (community, discussion, interaction)\n\n**Structure Types**:\n- Linear narrative progression\n- Problem-solution frameworks\n- Question-answer sequences\n- Comparative analysis structures\n- Step-by-step instructional flows\n- Exploratory investigation patterns\n- Cyclical or thematic repetition\n\n### SYSTEM 1: UNIVERSAL OPENING MECHANICS\n**Purpose**: Extract attention capture that works for any content type\n\n**Analysis Requirements**:\n- **Entry Point Mechanics**: How content begins engagement regardless of topic\n- **Context Establishment**: Universal methods for setting up content consumption\n- **Expectation Management**: How content signals what's coming\n- **Audience Positioning**: Universal techniques for audience orientation\n\n**Content-Agnostic Patterns**:\n- Immediate engagement triggers (any type)\n- Context setup mechanisms (any subject)\n- Expectation calibration methods (any format)\n- Attention focus techniques (any purpose)\n\n### SYSTEM 2: UNIVERSAL INFORMATION ARCHITECTURE\n**Purpose**: Extract how information is organized and delivered effectively\n\n**Analysis Requirements**:\n- **Information Hierarchy**: How content prioritizes and sequences information\n- **Complexity Management**: Universal techniques for handling any complexity level\n- **Progression Logic**: How content moves from point A to point B\n- **Connection Methods**: Universal techniques for linking information\n\n### SYSTEM 3: UNIVERSAL ENGAGEMENT MECHANICS\n**Purpose**: Extract attention maintenance across any content type\n\n**Analysis Requirements**:\n- **Interest Sustainment**: Universal techniques for maintaining attention\n- **Curiosity Management**: How content creates and satisfies curiosity\n- **Momentum Creation**: Universal methods for driving content forward\n- **Fatigue Prevention**: How content prevents audience disengagement\n\n### SYSTEM 4: UNIVERSAL STRUCTURAL FLOW\n**Purpose**: Extract progression mechanics that work for any content organization\n\n**Analysis Requirements**:\n- **Transition Mechanics**: Universal methods for moving between sections\n- **Escalation Patterns**: How content builds intensity (any type)\n- **Rhythm Management**: Universal pacing techniques\n- **Structural Cohesion**: How content maintains unity\n\n### SYSTEM 5: UNIVERSAL SATISFACTION DELIVERY\n**Purpose**: Extract completion and fulfillment mechanics across content types\n\n**Analysis Requirements**:\n- **Resolution Patterns**: Universal methods for concluding content\n- **Satisfaction Mechanisms**: How content delivers on expectations\n- **Completion Signals**: Universal techniques for signaling endings\n- **Value Delivery**: How content ensures audience feels fulfilled\n\n### SYSTEM 6: UNIVERSAL CREDIBILITY PATTERNS\n**Purpose**: Extract trust and reliability establishment across any field\n\n**Analysis Requirements**:\n- **Reliability Signals**: Universal markers of trustworthiness\n- **Expertise Indicators**: How competence is demonstrated (any field)\n- **Consistency Patterns**: Universal techniques for maintaining reliability\n- **Authority Establishment**: How credibility is built (any context)\n\n### SYSTEM 7: UNIVERSAL LINGUISTIC ARCHITECTURE\n**Purpose**: Extract language patterns that work across subjects and styles\n\n**Analysis Requirements**:\n- **Vocabulary Function Mapping**: Classify words by structural job, not content\n- **Sentence Architecture**: Universal patterns of sentence construction\n- **Tone Management**: How emotional register is controlled\n- **Clarity Techniques**: Universal methods for clear communication\n\n### SYSTEM 8: UNIVERSAL ENGAGEMENT SUSTAINABILITY\n**Purpose**: Extract long-term attention management across content lengths\n\n**Analysis Requirements**:\n- **Attention Renewal**: Universal techniques for refreshing engagement\n- **Interest Evolution**: How content maintains novelty\n- **Depth Management**: Universal methods for controlling content depth\n- **Participation Techniques**: How content involves audiences\n\n## ENHANCED OUTPUT SPECIFICATION\n\n# UNIVERSAL CONTENT DNA BLUEPRINT\n\n## EXTRACTION METADATA\n- **Content Type Classification**: [identified content category]\n- **Structure Type**: [identified structural pattern]\n- **Universal Applicability**: [assessment across content types]\n- **Pattern Transferability**: [how well patterns translate]\n\n---\n\n## UNIVERSAL PATTERN ANALYSIS\n\n### OPENING MECHANICS - UNIVERSAL\n**Core Attention Pattern**: [mechanism that works for any content type]\n\n**Evidence from Input**:\n- *\"[exact quote 1]\"*\n- *\"[exact quote 2]\"*\n- *\"[exact quote 3]\"*\n\n**Universal Application Template**:\nOpening Mechanism: [attention trigger] + [context establishment] + [expectation setting]\nEducational Content: [curiosity trigger] + [learning context] + [outcome preview]\nEntertainment Content: [intrigue trigger] + [story context] + [experience preview]\nTechnical Content: [relevance trigger] + [problem context] + [solution preview]\n\n**Cross-Content Adaptation**:\n- **Any Information Type**: [how mechanism adapts]\n- **Any Audience Level**: [how mechanism scales]\n- **Any Content Length**: [how mechanism adjusts]\n\n### INFORMATION ARCHITECTURE - UNIVERSAL\n**Core Organization Pattern**: [how information is structured regardless of content]\n\n**Hierarchy Management**:\n- **Priority System**: [universal method for importance ranking]\n- **Sequence Logic**: [universal progression rules]\n- **Connection Framework**: [universal linking methods]\n\n**Complexity Control**:\n- **Density Management**: [universal techniques for information density]\n- **Accessibility Scaling**: [universal methods for audience adaptation]\n- **Depth Calibration**: [universal techniques for appropriate detail level]\n\n### ENGAGEMENT MECHANICS - UNIVERSAL\n**Core Attention System**: [mechanism that maintains interest regardless of subject]\n\n**Interest Sustainment**:\n- **Novelty Creation**: [universal techniques for maintaining freshness]\n- **Participation Methods**: [universal audience involvement techniques]\n- **Momentum Management**: [universal forward-drive techniques]\n\n**Curiosity Architecture**:\n- **Question Generation**: [universal techniques for creating interest]\n- **Mystery Management**: [universal techniques for information withholding/revealing]\n- **Surprise Integration**: [universal techniques for unexpected elements]\n\n### FLOW ARCHITECTURE - UNIVERSAL\n**Core Progression System**: [how content moves forward regardless of type]\n\n**Transition Mechanics**:\n- **Section Bridging**: [universal connection techniques]\n- **Momentum Preservation**: [universal continuity techniques]  \n- **Logic Flow**: [universal reasoning progression]\n\n**Rhythm Control**:\n- **Pacing Patterns**: [universal tempo management]\n- **Intensity Modulation**: [universal energy control]\n- **Rest Integration**: [universal fatigue management]\n\n### RESOLUTION ARCHITECTURE - UNIVERSAL\n**Core Completion System**: [how content satisfies regardless of purpose]\n\n**Satisfaction Delivery**:\n- **Expectation Fulfillment**: [universal techniques for meeting promises]\n- **Value Confirmation**: [universal techniques for demonstrating worth]\n- **Closure Creation**: [universal techniques for appropriate endings]\n\n**Memory Integration**:\n- **Retention Optimization**: [universal techniques for memorability]\n- **Application Enablement**: [universal techniques for practical use]\n- **Connection Facilitation**: [universal techniques for lasting impact]\n\n---\n\n## MASTER UNIVERSAL REPLICATION SYSTEM\n\n### Content-Agnostic Constants\n**Universal Patterns** (work for any content type):\n1. **[Pattern Name]**: [pure structural mechanism] + [universal variables]\n2. **[Pattern Name]**: [pure structural mechanism] + [universal variables]\n\n### Dynamic Content Matrix\n**Content-Type Variables**:\n\n1. **Purpose Adaptations**\n   - **Informational Content**: [specific adaptations]\n   - **Educational Content**: [specific adaptations]\n   - **Entertainment Content**: [specific adaptations]\n   - **Technical Content**: [specific adaptations]\n\n2. **Structure Adaptations**\n   - **Linear Narrative**: [structural modifications]\n   - **Problem-Solution**: [structural modifications]\n   - **Instructional Flow**: [structural modifications]\n   - **Exploratory Pattern**: [structural modifications]\n\n### Implementation Protocol\n**Universal Application Steps**:\n1. **Content Type Detection**: Identify purpose and structure type\n2. **Pattern Selection**: Choose appropriate universal mechanisms\n3. **Variable Calibration**: Adjust for content requirements\n4. **Effectiveness Validation**: Confirm pattern maintains function\n\n**CRITICAL MANDATE**: Every extracted pattern must work equally well for educational tutorials, entertainment content, technical documentation, creative works, and any other content type while maintaining structural effectiveness."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        1360,
        144
      ],
      "id": "daed9297-b757-4118-9e74-1195d294b88d",
      "name": "Gerador Guia Roteiro",
      "retryOnFail": true
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d89696b6-622f-47ad-ba89-6d0aaf82c791",
              "name": "id_canal",
              "value": "={{ $json.body.id_canal }}",
              "type": "string"
            },
            {
              "id": "eeb70a72-17cd-4799-b655-33082f8a9f20",
              "name": "prompt_titulo",
              "value": "={{ $json.body.prompt_titulo }}",
              "type": "string"
            },
            {
              "id": "13f4c186-000a-41e6-8dee-36c080bf52ec",
              "name": "prompt_roteiro",
              "value": "={{ $json.body.prompt_roteiro }}",
              "type": "string"
            },
            {
              "id": "678c8c93-a37d-4a7c-8f9c-7c6aefc83fb4",
              "name": "id_voz",
              "value": "={{ $json.body.id_voz }}",
              "type": "number"
            },
            {
              "id": "a547ff17-872b-4273-b72f-e8dcb7fd63ea",
              "name": "media_chars",
              "value": "={{ $json.body.media_chars }}",
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        128,
        880
      ],
      "id": "55adecee-845e-4e24-9606-15161a4483fb",
      "name": "setData1"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "updatePrompts",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -96,
        880
      ],
      "id": "e1270798-601d-4aa6-8ba3-4cad35d1505a",
      "name": "Atualizar Prompt Roteiro",
      "webhookId": "0b741897-fa65-485c-b360-cc2ceac11c06"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        784,
        880
      ],
      "id": "b40a0721-b00b-4ef3-92e5-9aba5b288e61",
      "name": "Respond Roteiro Atualizado"
    },
    {
      "parameters": {
        "operation": "update",
        "tableId": "canais",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "condition": "eq",
              "keyValue": "={{ $json.id_canal }}"
            }
          ]
        },
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "prompt_titulo",
              "fieldValue": "={{ $json.prompt_titulo }}"
            },
            {
              "fieldId": "prompt_roteiro",
              "fieldValue": "={{ $json.prompt_roteiro }}"
            },
            {
              "fieldId": "voz_prefereida",
              "fieldValue": "={{ $json.id_voz }}"
            },
            {
              "fieldId": "media_chars",
              "fieldValue": "={{ $json.media_chars }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        368,
        880
      ],
      "id": "c503e211-fcb1-4c13-9603-48a1494fddc5",
      "name": "Atualiza DB",
      "credentials": {
        "supabaseApi": {
          "id": "oGUlDIJIN0NRUbWc",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "bd70d38e-8813-4c7d-8e3d-56b50ca84e49",
              "name": "prompt_titulo",
              "value": "={{ $json.prompt_titulo }}",
              "type": "string"
            },
            {
              "id": "b56f24b7-73f6-4fab-a6b0-f82ae8d0e8f5",
              "name": "prompt_roteiro",
              "value": "={{ $json.prompt_roteiro }}",
              "type": "string"
            },
            {
              "id": "0cc99d01-9382-4c15-81f4-18c6bff581cf",
              "name": "voz_prefereida",
              "value": "={{ $json.voz_prefereida }}",
              "type": "number"
            },
            {
              "id": "e0fac378-fabd-486f-932e-e3f9546bc3f6",
              "name": "media_chars",
              "value": "={{ $json.media_chars }}",
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        576,
        880
      ],
      "id": "d75aa96f-9dbc-4775-9bd6-fd619b1fe4a9",
      "name": "setPrompt"
    },
    {
      "parameters": {
        "content": "# Atualizar Prompts",
        "height": 416,
        "width": 1184
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -208,
        720
      ],
      "id": "b266ed03-95f2-4426-85dc-f77ec579f0b6",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "# Gerador de Prompts",
        "height": 768,
        "width": 2976,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -208,
        -112
      ],
      "id": "84c02895-2bd8-4637-95ff-45ad448567da",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "jsCode": "// Acessa os dados JSON do primeiro item que chega no nó\nconst itemData = items[0].json;\n\n// Pega o conteúdo de cada roteiro\nconst roteiro1 = $('setData').first().json.roteiro_1;\nconst roteiro2 = $('setData').first().json.roteiro_2;\nconst roteiro3 = $('setData').first().json.roteiro_3;\n\n// Calcula o número de caracteres de cada roteiro\nconst comprimento1 = roteiro1.length;\nconst comprimento2 = roteiro2.length;\nconst comprimento3 = roteiro3.length;\n\n// Soma os comprimentos e calcula a média\nconst mediaCaracteres = (comprimento1 + comprimento2 + comprimento3) / 3;\n\n// Arredonda o resultado para um número inteiro (opcional, mas recomendado)\nconst mediaArredondada = Math.round(mediaCaracteres);\n\n// Retorna o resultado. O n8n usará este objeto como a saída do nó.\nreturn {\n  json: {\n    media_caracteres: mediaArredondada\n  }\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        768,
        144
      ],
      "id": "f714b700-298d-488c-a228-1dd3ce7192d0",
      "name": "Media Chars"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "54d19252-357a-4ca5-a44a-bb6aca6068fe",
              "name": "id_canal",
              "value": "={{ $json.body.id_canal }}",
              "type": "number"
            },
            {
              "id": "0df0abf1-2c5b-4a6a-bd18-6df623c47f00",
              "name": "roteiro",
              "value": "={{ $json.body.roteiro }}",
              "type": "string"
            },
            {
              "id": "b511bd8f-7ac4-409f-a605-1e53fa9b7e31",
              "name": "titulo",
              "value": "={{ $json.body.titulo }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1392,
        880
      ],
      "id": "1c571156-a759-408e-8b82-226be092eb2f",
      "name": "setDados3"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "salvarRoteiro",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        1168,
        880
      ],
      "id": "1081df18-b9ae-4c36-85f9-96c657f667c8",
      "name": "salvarRoteiro",
      "webhookId": "13342621-471f-4255-857d-b77f70ba5682"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=###TITULO_1:\n{{ $json.titulo_1 }}\n\n###TITULO_2:\n{{ $json.titulo_2 }}\n\n###TITULO_3:\n{{ $json.titulo_3 }}",
        "options": {
          "systemMessage": "=# TITLE DNA MASTER EXTRACTOR - BLUEPRINT EDITION\n\nYou are the world's leading expert in title architecture reverse engineering and viral linguistics. Your singular mission is to perform complete **DNA extraction** on the provided titles, creating a master blueprint that captures both structural mechanics and psychological triggers for precise replication across any content vertical.\n\n## CORE DIRECTIVE\n\nExtract the **universal title architecture** and **viral linguistic signature** that makes titles compelling, regardless of specific subject matter. Focus on HOW the structure works, WHY certain word choices create specific psychological effects, and WHAT patterns can be replicated for different niches while maintaining click-through effectiveness.\n\n## EXTRACTION METHODOLOGY\n\nFor each identified pattern:\n1. **DETECT**: Identify consistent structural or linguistic elements across all title inputs\n2. **EVIDENCE**: Extract specific textual examples that demonstrate the pattern\n3. **ABSTRACT**: Distill to universal principle applicable across content verticals\n4. **TEMPLATE**: Create replicable formula with clear implementation guidelines\n5. **VALIDATE**: Confirm pattern serves essential function in overall title architecture\n\n## 15-SYSTEM ANALYSIS FRAMEWORK\n\n### SYSTEM 1: ATTENTION CAPTURE MECHANICS\n**Purpose**: Reverse engineer immediate hook techniques and cognitive interruption patterns\n\n**Analysis Requirements**:\n- Primary hook methodology with exact textual evidence\n- Opening word psychology and positioning patterns\n- Cognitive interruption vocabulary analysis\n- Scroll-stopping linguistic structures\n- Universal attention templates across niches\n\n### SYSTEM 2: CURIOSITY GAP ARCHITECTURE\n**Purpose**: Map information withholding and revelation promise systems\n\n**Analysis Requirements**:\n- Mystery establishment vocabulary patterns\n- Information gap creation techniques\n- Revelation promise linguistic structures\n- Suspense maintenance word choices\n- Cross-niche curiosity adaptation guidelines\n\n### SYSTEM 3: EMOTIONAL TRIGGER INTEGRATION\n**Purpose**: Identify psychological activation points and emotional response patterns\n\n**Analysis Requirements**:\n- Primary emotion activation vocabulary\n- Secondary emotion layering techniques\n- Psychological pressure point targeting\n- Emotional intensity calibration methods\n- Universal trigger adaptation protocols\n\n### SYSTEM 4: BENEFIT PROMISE ARCHITECTURE\n**Purpose**: Analyze value proposition communication and outcome suggestion systems\n\n**Analysis Requirements**:\n- Value communication linguistic patterns\n- Outcome promise vocabulary structures\n- Benefit hierarchy expression techniques\n- Satisfaction guarantee linguistic signals\n- Cross-vertical benefit adaptation methods\n\n### SYSTEM 5: URGENCY AND SCARCITY LINGUISTICS\n**Purpose**: Extract time-pressure creation and limitation suggestion patterns\n\n**Analysis Requirements**:\n- Urgency vocabulary and positioning analysis\n- Scarcity implication linguistic techniques\n- FOMO activation word patterns\n- Time-sensitivity expression methods\n- Universal urgency adaptation templates\n\n### SYSTEM 6: AUTHORITY AND CREDIBILITY MARKERS\n**Purpose**: Map trust establishment and expertise communication systems\n\n**Analysis Requirements**:\n- Authority vocabulary positioning patterns\n- Credibility linguistic signals analysis\n- Expertise implication techniques\n- Trust-building word selection methods\n- Universal authority adaptation protocols\n\n### SYSTEM 7: TARGET AUDIENCE PRECISION\n**Purpose**: Analyze demographic targeting and psychographic appeal patterns\n\n**Analysis Requirements**:\n- Audience identification vocabulary markers\n- Demographic targeting linguistic techniques\n- Psychographic appeal word patterns\n- Inclusion/exclusion language analysis\n- Universal targeting adaptation methods\n\n### SYSTEM 8: KEYWORD OPTIMIZATION ARCHITECTURE\n**Purpose**: Extract SEO integration and discoverability enhancement patterns\n\n**Analysis Requirements**:\n- Primary keyword positioning analysis\n- Secondary keyword integration techniques\n- Search intent alignment vocabulary\n- Discoverability optimization patterns\n- Algorithm-friendly linguistic structures\n\n### SYSTEM 9: LENGTH AND RHYTHM CONTROL\n**Purpose**: Map character optimization and reading flow systems\n\n**Analysis Requirements**:\n- Optimal length distribution patterns\n- Rhythm creation through word selection\n- Flow management linguistic techniques\n- Readability optimization methods\n- Universal length adaptation protocols\n\n### SYSTEM 10: CONTRAST AND CONTRADICTION DYNAMICS\n**Purpose**: Analyze cognitive dissonance creation and expectation violation patterns\n\n**Analysis Requirements**:\n- Contradiction vocabulary structures\n- Expectation violation techniques\n- Cognitive dissonance creation methods\n- Surprise element integration patterns\n- Universal contrast adaptation templates\n\n### SYSTEM 11: SPECIFICITY AND VAGUENESS BALANCE\n**Purpose**: Extract information precision control and mystery maintenance systems\n\n**Analysis Requirements**:\n- Specificity calibration techniques\n- Strategic vagueness implementation\n- Information dosage control patterns\n- Clarity/mystery balance optimization\n- Universal specificity adaptation methods\n\n### SYSTEM 12: SOCIAL PROOF AND VALIDATION INTEGRATION\n**Purpose**: Map community appeal and belonging suggestion systems\n\n**Analysis Requirements**:\n- Social proof vocabulary patterns\n- Community belonging linguistic signals\n- Validation suggestion techniques\n- Peer pressure activation methods\n- Universal social proof adaptation protocols\n\n### SYSTEM 13: GENRE AND FORMAT INDICATORS\n**Purpose**: Analyze content type communication and expectation setting patterns\n\n**Analysis Requirements**:\n- Format indication vocabulary analysis\n- Genre expectation linguistic signals\n- Content type positioning techniques\n- Format promise linguistic structures\n- Universal format adaptation templates\n\n### SYSTEM 14: VIRAL PROPAGATION LINGUISTICS\n**Purpose**: Extract shareability enhancement and word-of-mouth trigger patterns\n\n**Analysis Requirements**:\n- Shareability vocabulary patterns\n- Viral trigger linguistic elements\n- Conversation starter word selection\n- Social amplification techniques\n- Universal virality adaptation methods\n\n### SYSTEM 15: CONVERSION OPTIMIZATION ARCHITECTURE\n**Purpose**: Map click-through maximization and engagement prediction systems\n\n**Analysis Requirements**:\n- Click-trigger vocabulary optimization\n- Engagement prediction linguistic patterns\n- Conversion rate enhancement techniques\n- Performance optimization word selection\n- Universal conversion adaptation protocols\n\n## OUTPUT SPECIFICATION\n\nDeliver analysis in **structured markdown format** following this template:\n\n# TITLE DNA MASTER BLUEPRINT\n\n## EXTRACTION METADATA\n- **Analysis Completeness**: [confirmed/partial/incomplete]\n- **Cross-Title Validation**: [confirmed/partial/incomplete]\n- **Universal Adaptability**: [high/medium/low]\n- **Replication Confidence**: [description]\n- **Viral Signature Strength**: [distinctive/moderate/weak]\n- **Total Titles Analyzed**: [number]\n\n---\n\n## SYSTEM 1: ATTENTION CAPTURE MECHANICS\n\n### Hook Architecture Analysis\n**Primary Capture Technique**: [technique description]\n\n**Textual Evidence**:\n- *\"[exact title quote demonstrating technique]\"*\n- *\"[exact title quote demonstrating technique]\"*\n- *\"[exact title quote demonstrating technique]\"*\n\n**Opening Word Psychology**:\n- **Power Words Used**: [list with frequency]\n- **Position Strategy**: [first/second/third word placement patterns]\n- **Cognitive Interruption Level**: [high/medium/low]\n\n**Universal Template**: [replicable formula]\n**Implementation Formula**: \n1. [step-by-step application]\n2. [specific word type selection]\n3. [positioning guidelines]\n\n**Cross-Niche Adaptations**:\n- **Tech/Business**: [adaptation method]\n- **Health/Fitness**: [adaptation method]\n- **Entertainment**: [adaptation method]\n- **Education**: [adaptation method]\n\n---\n\n## SYSTEM 2: CURIOSITY GAP ARCHITECTURE\n\n### Information Withholding System\n**Gap Creation Method**: [description]\n**Mystery Vocabulary**: [list with examples]\n**Revelation Promise Patterns**: [list]\n\n**Evidence Analysis**:\n- *\"[exact quote showing gap creation]\"*\n- *\"[exact quote showing revelation promise]\"*\n- *\"[exact quote showing mystery maintenance]\"*\n\n### Suspense Linguistics\n**Withholding Techniques**: [list]\n**Promise Delivery Indicators**: [vocabulary patterns]\n**Curiosity Intensity Calibration**: [methods]\n\n**Universal Gap Templates**:\n- **Information Gap**: [formula]\n- **Outcome Gap**: [formula]\n- **Method Gap**: [formula]\n- **Benefit Gap**: [formula]\n\n---\n\n## SYSTEM 3: EMOTIONAL TRIGGER INTEGRATION\n\n### Primary Emotion Activation\n**Dominant Emotional Appeals**:\n1. **[Emotion Type]**\n   - Trigger Vocabulary: [list]\n   - Evidence Quotes: [specific titles]\n   - Intensity Level: [high/medium/low]\n   - Frequency: [pattern analysis]\n\n**Secondary Emotion Layering**: [techniques]\n**Emotional Intensity Progression**: [patterns]\n\n### Psychological Pressure Points\n**Fear-Based Triggers**: [vocabulary and evidence]\n**Desire-Based Triggers**: [vocabulary and evidence]\n**Curiosity-Based Triggers**: [vocabulary and evidence]\n**Achievement-Based Triggers**: [vocabulary and evidence]\n\n**Emotion Adaptation Matrix**:\n- **B2B Content**: [emotional approach adaptation]\n- **Consumer Content**: [emotional approach adaptation]\n- **Educational Content**: [emotional approach adaptation]\n- **Entertainment Content**: [emotional approach adaptation]\n\n---\n\n## SYSTEM 4: BENEFIT PROMISE ARCHITECTURE\n\n### Value Communication System\n**Promise Structure Patterns**:\n1. **[Promise Type]**\n   - Linguistic Implementation: [pattern]\n   - Evidence Examples: [specific quotes]\n   - Value Hierarchy: [description]\n\n**Outcome Suggestion Vocabulary**: [list]\n**Benefit Specificity Levels**: [analysis]\n\n### Satisfaction Guarantee Linguistics\n**Certainty Language Patterns**: [list]\n**Result Promise Structures**: [list]\n**Value Proposition Vocabulary**: [list]\n\n**Universal Benefit Templates**:\n- **Skill Acquisition**: [formula]\n- **Problem Solution**: [formula]\n- **Entertainment Value**: [formula]\n- **Information Gain**: [formula]\n\n---\n\n## SYSTEM 5: URGENCY AND SCARCITY LINGUISTICS\n\n### Time-Pressure Creation\n**Urgency Vocabulary Analysis**:\n- **Direct Urgency Words**: [list with evidence]\n- **Implied Urgency Phrases**: [list with evidence]\n- **Time-Limit Suggestions**: [patterns]\n\n**FOMO Activation Techniques**: [list]\n**Scarcity Implication Methods**: [list]\n\n### Temporal Psychology Patterns\n**Immediate Action Triggers**: [vocabulary]\n**Deadline Suggestion Language**: [patterns]\n**Opportunity Loss Implications**: [techniques]\n\n**Universal Urgency Adaptations**:\n- **Evergreen Content**: [urgency creation method]\n- **Trending Topics**: [urgency amplification method]\n- **Educational Content**: [urgency application method]\n- **Product Launches**: [urgency optimization method]\n\n---\n\n## SYSTEM 6: AUTHORITY AND CREDIBILITY MARKERS\n\n### Trust Establishment Linguistics\n**Authority Vocabulary Patterns**: [list]\n**Credibility Signal Words**: [list]\n**Expertise Implication Techniques**: [list]\n\n**Evidence Analysis**:\n- *\"[quote showing authority establishment]\"*\n- *\"[quote showing credibility signaling]\"*\n- *\"[quote showing expertise implication]\"*\n\n### Trust-Building Architecture\n**Implicit Authority Methods**: [techniques]\n**Explicit Credibility Statements**: [patterns]\n**Social Proof Integration**: [methods]\n\n**Authority Adaptation Templates**:\n- **Personal Brand**: [authority building approach]\n- **Corporate Content**: [authority establishment method]\n- **Educational Platform**: [credibility signaling approach]\n- **Entertainment Channel**: [trust building method]\n\n---\n\n## SYSTEM 7: TARGET AUDIENCE PRECISION\n\n### Demographic Targeting Analysis\n**Audience Identification Markers**:\n1. **[Demographic Category]**\n   - Targeting Vocabulary: [list]\n   - Evidence Quotes: [specific examples]\n   - Inclusion Signals: [patterns]\n   - Exclusion Implications: [techniques]\n\n**Psychographic Appeal Patterns**: [analysis]\n**Interest-Based Targeting**: [vocabulary]\n\n### Audience Connection Linguistics\n**Relatability Markers**: [list]\n**Community Language**: [patterns]\n**Insider Vocabulary**: [analysis]\n\n**Universal Targeting Adaptations**:\n- **Niche Communities**: [targeting approach]\n- **Broad Audiences**: [appeal method]\n- **Professional Groups**: [connection technique]\n- **Interest-Based Segments**: [targeting strategy]\n\n---\n\n## SYSTEM 8: KEYWORD OPTIMIZATION ARCHITECTURE\n\n### SEO Integration Analysis\n**Primary Keyword Usage Patterns**:\n- **Positioning Strategy**: [first/middle/last placement analysis]\n- **Density Optimization**: [frequency patterns]\n- **Natural Integration Methods**: [techniques]\n\n**Search Intent Alignment**: [vocabulary analysis]\n**Algorithm-Friendly Structures**: [patterns]\n\n### Discoverability Enhancement\n**Long-Tail Keyword Integration**: [methods]\n**Semantic Keyword Usage**: [patterns]\n**Trending Term Incorporation**: [techniques]\n\n**SEO Adaptation Templates**:\n- **High-Competition Keywords**: [optimization approach]\n- **Long-Tail Opportunities**: [targeting method]\n- **Trending Topics**: [keyword integration technique]\n- **Evergreen Terms**: [optimization strategy]\n\n---\n\n## SYSTEM 9: LENGTH AND RHYTHM CONTROL\n\n### Character Optimization Analysis\n**Length Distribution Patterns**:\n- **Short Titles (≤40 chars)**: [frequency and effectiveness]\n- **Medium Titles (41-60 chars)**: [frequency and effectiveness]\n- **Long Titles (61+ chars)**: [frequency and effectiveness]\n\n**Optimal Length Templates**:\n- **Mobile Optimization**: [character limits and patterns]\n- **Desktop Display**: [length optimization methods]\n- **Social Sharing**: [character count considerations]\n\n### Reading Flow Architecture\n**Rhythm Creation Techniques**: [analysis]\n**Word Flow Patterns**: [list]\n**Syllable Distribution**: [patterns]\n\n**Universal Length Adaptations**:\n- **Platform-Specific**: [optimization approach per platform]\n- **Content-Type Specific**: [length strategy per content type]\n- **Audience-Specific**: [character optimization per demographic]\n\n---\n\n## SYSTEM 10: CONTRAST AND CONTRADICTION DYNAMICS\n\n### Cognitive Dissonance Creation\n**Contradiction Vocabulary Structures**:\n1. **[Contradiction Type]**\n   - Implementation Pattern: [technique]\n   - Evidence Examples: [specific quotes]\n   - Psychological Effect: [description]\n\n**Expectation Violation Techniques**: [list]\n**Surprise Element Integration**: [methods]\n\n### Paradox Architecture\n**Logical Contradiction Patterns**: [analysis]\n**Unexpected Combination Methods**: [techniques]\n**Cognitive Tension Creation**: [vocabulary]\n\n**Universal Contrast Templates**:\n- **Problem/Solution Paradox**: [formula]\n- **Expectation/Reality Contrast**: [formula]\n- **Simple/Complex Opposition**: [formula]\n- **Common/Uncommon Juxtaposition**: [formula]\n\n---\n\n## SYSTEM 11: SPECIFICITY AND VAGUENESS BALANCE\n\n### Information Precision Control\n**Specificity Calibration Analysis**:\n- **Hyper-Specific Elements**: [vocabulary and positioning]\n- **Strategic Vagueness**: [implementation techniques]\n- **Information Dosage**: [control methods]\n\n**Clarity/Mystery Balance Optimization**: [patterns]\n\n### Strategic Ambiguity Architecture\n**Intentional Vagueness Techniques**: [list]\n- **Beneficial Ambiguity**: [when and how]\n- **Curiosity-Preserving Vagueness**: [methods]\n- **Specific Detail Selection**: [criteria]\n\n**Evidence Analysis**:\n- *\"[quote showing strategic specificity]\"*\n- *\"[quote showing beneficial vagueness]\"*\n- *\"[quote showing optimal balance]\"*\n\n**Universal Balance Templates**:\n- **Tutorial Content**: [specificity/vagueness ratio]\n- **Entertainment Content**: [information balance approach]\n- **News Content**: [clarity/mystery optimization]\n- **Educational Content**: [precision control method]\n\n---\n\n## SYSTEM 12: SOCIAL PROOF AND VALIDATION INTEGRATION\n\n### Community Appeal Architecture\n**Social Proof Vocabulary Patterns**: [list]\n**Belonging Signal Words**: [analysis]\n**Community Language Integration**: [techniques]\n\n**Validation Suggestion Methods**:\n1. **[Validation Type]**\n   - Linguistic Implementation: [pattern]\n   - Evidence Examples: [quotes]\n   - Psychological Mechanism: [explanation]\n\n### Peer Influence Linguistics\n**Social Pressure Activation**: [vocabulary]\n**Group Identity Reinforcement**: [patterns]\n**Community Validation Triggers**: [techniques]\n\n**Universal Social Proof Adaptations**:\n- **Niche Communities**: [validation approach]\n- **Mainstream Audiences**: [social proof method]\n- **Professional Networks**: [credibility technique]\n- **Interest Groups**: [belonging strategy]\n\n---\n\n## SYSTEM 13: GENRE AND FORMAT INDICATORS\n\n### Content Type Communication\n**Format Signal Vocabulary**:\n- **Tutorial Indicators**: [list with evidence]\n- **Entertainment Markers**: [list with evidence]\n- **Review Signals**: [list with evidence]\n- **News Format Indicators**: [list with evidence]\n\n**Genre Expectation Setting**: [techniques]\n**Content Promise Alignment**: [methods]\n\n### Format Promise Architecture\n**Delivery Method Implications**: [vocabulary]\n**Content Structure Signals**: [patterns]\n**Experience Promise Patterns**: [analysis]\n\n**Universal Format Adaptations**:\n- **Video Content**: [indicator approach]\n- **Written Content**: [format signaling method]\n- **Interactive Content**: [expectation setting technique]\n- **Live Content**: [format promise strategy]\n\n---\n\n## SYSTEM 14: VIRAL PROPAGATION LINGUISTICS\n\n### Shareability Enhancement\n**Viral Trigger Vocabulary**:\n1. **[Viral Element Type]**\n   - Implementation Pattern: [technique]\n   - Evidence Examples: [specific quotes]\n   - Sharing Motivation: [psychological driver]\n\n**Conversation Starter Patterns**: [analysis]\n**Social Amplification Techniques**: [list]\n\n### Word-of-Mouth Optimization\n**Memorable Phrase Construction**: [methods]\n**Quote-Worthy Element Creation**: [techniques]\n**Discussion Topic Generation**: [vocabulary]\n\n**Universal Virality Templates**:\n- **Controversy-Based**: [viral approach]\n- **Surprise-Based**: [sharing trigger method]\n- **Value-Based**: [amplification technique]\n- **Entertainment-Based**: [viral strategy]\n\n---\n\n## SYSTEM 15: CONVERSION OPTIMIZATION ARCHITECTURE\n\n### Click-Through Maximization\n**Click-Trigger Vocabulary Analysis**:\n- **High-Converting Words**: [list with performance indicators]\n- **Action-Inducing Phrases**: [patterns]\n- **Engagement Prediction Signals**: [vocabulary]\n\n**Performance Optimization Techniques**: [list]\n\n### Engagement Prediction Linguistics\n**High-Engagement Indicators**: [vocabulary patterns]\n**Retention Prediction Signals**: [linguistic elements]\n**Satisfaction Probability Markers**: [analysis]\n\n**Universal Conversion Templates**:\n- **Cold Audiences**: [click optimization approach]\n- **Warm Audiences**: [engagement strategy]\n- **Returning Viewers**: [conversion technique]\n- **Niche Audiences**: [optimization method]\n\n---\n\n## MASTER REPLICATION SYSTEM\n\n### Structural Constants\n**Immutable Elements**:\n1. **[Element Name]**\n   - Evidence Basis: [supporting title quotes]\n   - Function Necessity: [explanation]\n   - Violation Consequences: [description]\n\n**Non-Negotiable Patterns**: [list]\n**Quality Minimums**: [standards]\n\n### Adaptation Control Matrix\n**Variable Components**:\n1. **[Component Name]**\n   - Customization Rules: [list]\n   - Preservation Requirements: [list]\n   - Context Adaptations:\n     - **Technology**: [approach]\n     - **Health/Fitness**: [approach]\n     - **Business/Finance**: [approach]\n     - **Entertainment**: [approach]\n     - **Education**: [approach]\n     - **Lifestyle**: [approach]\n     - **News/Current Events**: [approach]\n\n### Implementation Protocol\n**Step-by-Step Process**:\n1. **[Phase Name]**\n   - Core Objective: [description]\n   - Required Elements: [list]\n   - Linguistic Requirements: [list]\n   - Quality Checkpoints: [list]\n   - Success Metrics: [list]\n   - Failure Indicators: [list]\n   - Correction Methods: [list]\n\n### Quality Assurance Framework\n**Structural Validation**: [checklist]\n**Psychological Trigger Verification**: [checklist]\n**Engagement Effectiveness Measures**: [checklist]\n**Universal Adaptability Tests**: [checklist]\n**Conversion Potential Assessment**: [checklist]\n\n## CRITICAL EXECUTION PARAMETERS\n\n**EVIDENCE REQUIREMENT**: Every pattern must be supported by specific title examples that demonstrate the technique in action.\n\n**UNIVERSALITY MANDATE**: All extracted patterns must be adaptable across content verticals (tech, health, business, entertainment, education, lifestyle, news) while maintaining effectiveness.\n\n**PRECISION FOCUS**: Extract HOW title mechanics work, not WHAT specific topics they cover. Focus on structure and psychology, not subject matter.\n\n**REPLICATION VIABILITY**: Every element must include clear implementation guidelines enabling immediate practical application.\n\n**PERFORMANCE ORIENTATION**: Capture exact vocabulary choices and structural decisions that drive clicks, engagement, and retention.\n\n## QUALITY VALIDATION CRITERIA\n\n- **Structural Completeness**: All 15 systems thoroughly analyzed\n- **Evidence Sufficiency**: Each pattern backed by concrete title examples\n- **Universal Applicability**: Templates work across content verticals\n- **Implementation Clarity**: Step-by-step replication guidelines provided\n- **Performance Correlation**: Patterns linked to engagement and conversion metrics\n\n## SUCCESS METRICS\n\nFinal blueprint enables any creator to:\n1. Replicate title effectiveness for their chosen niche\n2. Apply psychological triggers to match original performance\n3. Maintain audience engagement using identified patterns\n4. Adapt the system to their content vertical while preserving core effectiveness\n5. Validate their implementation using provided quality checkpoints\n6. Scale title creation while maintaining viral potential\n\n**INPUT FORMAT**: Provide titles in the following format:\n\n###Titulo_1:\n[titulo1]\n\n###Titulo_2:\n[titulo2]\n\n###Titulo_3:\n[titulo3]\n\n**OUTPUT FORMAT**: Return comprehensive markdown analysis covering all 15 systems with complete evidence, templates, and implementation protocols following the exact structure outlined above."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        336,
        144
      ],
      "id": "02d00dbd-93e3-477e-a266-3ac7a574fe45",
      "name": "Gerador Prompt Titulo",
      "retryOnFail": true
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "guiaRoteiro",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -128,
        144
      ],
      "id": "47a894db-d1a3-4702-8855-5033cb78fc1b",
      "name": "Gerar Prompts Guia",
      "webhookId": "a6166090-206a-4a5c-be7b-b7a575c50391"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "ad0ef368-c1e5-4eb4-8a62-67ef1c498fe3",
              "name": "prompt_titulo",
              "value": "={{ $('Gerador Prompt Titulo').item.json.output }}",
              "type": "string"
            },
            {
              "id": "e25748c2-1dbe-4857-9308-c453b0e3b588",
              "name": "prompt_roteiro",
              "value": "={{ $('Gerador Guia Roteiro').item.json.output }}",
              "type": "string"
            },
            {
              "id": "b6a7b94c-23fc-4e51-9e6a-e5038a93d177",
              "name": "prompt_thumb",
              "value": "={{ $('Gerador Thumb Prompt').item.json.output }}",
              "type": "string"
            },
            {
              "id": "1c2e1ba9-abc0-4566-b2e6-053b3018605f",
              "name": "media_chars",
              "value": "={{ $item(\"0\").$node[\"Media Chars\"].json[\"media_caracteres\"] }}",
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1712,
        144
      ],
      "id": "1e195183-3d08-42c9-bd98-3c79009f87f0",
      "name": "Define Saidas"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        832,
        512
      ],
      "id": "bddec171-b49a-4f93-92b8-f1801c0ce582",
      "name": "4.1-mini1",
      "credentials": {
        "openRouterApi": {
          "id": "F4pE0jNeTTFbrt5N",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        976,
        512
      ],
      "id": "7710d7d8-8dc1-47d4-8a94-df1f2b2d3c74",
      "name": "Gemini-2.5-Pro",
      "credentials": {
        "openRouterApi": {
          "id": "F4pE0jNeTTFbrt5N",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-flash",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        1136,
        512
      ],
      "id": "b6b55b94-958d-4d27-ae2a-1ea743e3f235",
      "name": "Gemini-2.5-Flash",
      "credentials": {
        "openRouterApi": {
          "id": "F4pE0jNeTTFbrt5N",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "58514331-fc5b-4237-aedd-790416b6eb56",
              "name": "id",
              "value": "={{ $json.id }}",
              "type": "number"
            },
            {
              "id": "b249e779-b7cd-41ee-b98d-66d4f86dbce7",
              "name": "prompt_roteiro",
              "value": "={{ $('Cria e Preenche Canal').item.json.prompt_roteiro }}",
              "type": "string"
            },
            {
              "id": "d9855de8-1bbf-4333-9e50-a0a507ac15d4",
              "name": "prompt_titulo",
              "value": "={{ $('Cria e Preenche Canal').item.json.prompt_titulo }}",
              "type": "string"
            },
            {
              "id": "6ebc2566-bfaf-4b04-a50f-fc2a7484922b",
              "name": "media_chars",
              "value": "={{ $json.media_chars }}",
              "type": "number"
            },
            {
              "id": "dd581ed7-eb9f-45f6-b744-3d87cf689706",
              "name": "prompt_thumb",
              "value": "={{ $('Cria e Preenche Canal').item.json.prompt_roteiro }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2256,
        144
      ],
      "id": "7741391b-75f3-425d-a8d9-ee39a6efafa8",
      "name": "SetResponse"
    },
    {
      "parameters": {
        "content": "# Salva roteiro DB",
        "height": 416,
        "width": 880,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1024,
        720
      ],
      "id": "dd0ec2eb-23a3-4510-934c-66bc7342e935",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "tableId": "roteiros",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "canal_id",
              "fieldValue": "={{ $json.id_canal }}"
            },
            {
              "fieldId": "roteiro",
              "fieldValue": "={{ $json.roteiro }}"
            },
            {
              "fieldId": "titulo",
              "fieldValue": "={{ $json.titulo }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        1632,
        880
      ],
      "id": "e4b85db4-de21-4707-b6be-8e51b517edf9",
      "name": "Salva DB",
      "credentials": {
        "supabaseApi": {
          "id": "oGUlDIJIN0NRUbWc",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "operation": "get",
        "tableId": "canais",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "keyValue": "={{ $json.body.id_canal }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        144,
        1296
      ],
      "id": "f867ed3b-4484-4e11-9b9b-1fb402c7edb6",
      "name": "Coleta Dados Canal1",
      "credentials": {
        "supabaseApi": {
          "id": "oGUlDIJIN0NRUbWc",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "numberInputs": 5,
        "rules": {
          "rule": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "6c008b95-34d9-4614-a02c-3cc5d9577284",
                    "leftValue": "={{ $('setData3').item.json.modelo }}",
                    "rightValue": "Sonnet-4",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "modelIndex": 2,
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "90d0541f-79a7-4f63-be5a-604ec665968d",
                    "leftValue": "={{ $('setData3').item.json.modelo }}",
                    "rightValue": "GPT-5",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "modelIndex": 3,
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "aa39ffb4-443b-4339-8780-31aabc971c07",
                    "leftValue": "={{ $('setData3').item.json.modelo }}",
                    "rightValue": "GPT-4.1-mini",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "modelIndex": 4,
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "0d7ac1a8-b0d5-4acf-af92-9dbe4a6c27c8",
                    "leftValue": "={{ $('setData3').item.json.modelo }}",
                    "rightValue": "Gemini-2.5-Pro",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "modelIndex": 5,
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "870b0665-13a8-4319-9ecf-a96574f133e2",
                    "leftValue": "={{ $('setData3').item.json.modelo }}",
                    "rightValue": "Gemini-2.5-Flash",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.modelSelector",
      "typeVersion": 1,
      "position": [
        816,
        1808
      ],
      "id": "64647944-e8b1-41b5-b66a-53b45deea2f4",
      "name": "Model Selector3"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8ba966b3-0949-409e-85b8-69d6341b60d7",
              "name": "id_canal",
              "value": "={{ $('Coleta Dados Canal1').item.json.id }}",
              "type": "number"
            },
            {
              "id": "30a05082-1780-4aed-9767-47e2f691b1af",
              "name": "nome_canal",
              "value": "={{ $('Coleta Dados Canal1').item.json.nome_canal }}",
              "type": "string"
            },
            {
              "id": "46140a16-eaf6-4f4e-87d9-5c5fc4120b0e",
              "name": "ideias",
              "value": "={{ $('Gerar Conteudo').item.json.body.nova_ideia }}",
              "type": "array"
            },
            {
              "id": "14702082-5e5c-4ac6-938a-a63a25bbc8df",
              "name": "modelo",
              "value": "={{ $('Gerar Conteudo').item.json.body.modelo }}",
              "type": "string"
            },
            {
              "id": "c40c4431-6f21-4f4a-a2a8-3edbbd05a3ed",
              "name": "prompt_titulo_canal",
              "value": "={{ $('Coleta Dados Canal1').item.json.prompt_titulo }}",
              "type": "string"
            },
            {
              "id": "5637a1c9-f939-4c89-948b-88918e8ac512",
              "name": "prompt_roteiro_canal",
              "value": "={{ $('Coleta Dados Canal1').item.json.prompt_roteiro }}",
              "type": "string"
            },
            {
              "id": "e3033f19-c2b9-496d-a843-c0a86954d4ec",
              "name": "prompt_thumb_canal",
              "value": "={{ $('Coleta Dados Canal1').item.json.prompt_thumb }}",
              "type": "string"
            },
            {
              "id": "be573fe2-3de1-4a9a-8bc6-ccc441f27818",
              "name": "roteiro_exemplo",
              "value": "={{ $('Coleta Dados Canal1').item.json.roteiro_1 }}",
              "type": "string"
            },
            {
              "id": "eea27f47-b40e-449e-a454-f167473a2f36",
              "name": "media_chars",
              "value": "={{ $('Coleta Dados Canal1').item.json.media_chars }}",
              "type": "string"
            },
            {
              "id": "517b7a66-ac13-42a5-8c0c-3804138fafed",
              "name": "idioma",
              "value": "={{ $('Gerar Conteudo').item.json.body.idioma }}",
              "type": "string"
            },
            {
              "id": "8c84684f-56e7-4052-ac74-ed480145bf82",
              "name": "voiceId",
              "value": "={{ $('Gerar Conteudo').item.json.body.voiceId }}",
              "type": "string"
            },
            {
              "id": "994ecf4f-e78c-4285-99b8-6c795b4f28ec",
              "name": "plataforma",
              "value": "={{ $('Gerar Conteudo').item.json.body.plataforma }}",
              "type": "string"
            },
            {
              "id": "c056a167-b298-4e2f-a9f2-b75eb8e6cda4",
              "name": "speed",
              "value": "={{ $('Gerar Conteudo').item.json.body.velocidade }}",
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -64,
        1536
      ],
      "id": "ef320389-ff81-4af9-a514-f4550fd9bb45",
      "name": "setData3"
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-flash",
        "options": {
          "maxTokens": "={{ $('setData3').item.json.media_chars * 4.5 }}",
          "temperature": 0.6
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        1168,
        1984
      ],
      "id": "40e2fcf8-a560-4fc1-bd69-e7a745f4527c",
      "name": "Gem-2.5-Flash1",
      "credentials": {
        "openRouterApi": {
          "id": "F4pE0jNeTTFbrt5N",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-pro",
        "options": {
          "maxTokens": "={{ $('setData3').item.json.media_chars * 4.5 }}",
          "temperature": 0.6
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        1040,
        1984
      ],
      "id": "235f23b7-d953-48af-9c09-0941dc91bc0e",
      "name": "Gem-2.5-Pro1",
      "credentials": {
        "openRouterApi": {
          "id": "F4pE0jNeTTFbrt5N",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "maxTokens": "={{ $('setData3').item.json.media_chars * 4.5 }}",
          "temperature": 0.6
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        912,
        1984
      ],
      "id": "e338916b-f07c-4ba6-a1b3-77a2fbaf3f3f",
      "name": "4.1-mini2",
      "credentials": {
        "openRouterApi": {
          "id": "F4pE0jNeTTFbrt5N",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "model": "openai/gpt-5",
        "options": {
          "maxTokens": "={{ $('setData3').item.json.media_chars * 4.5 }}",
          "temperature": 0.6
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        784,
        1984
      ],
      "id": "398b47d6-9a57-49be-8cfe-055a7087ef48",
      "name": "GPT-5²1",
      "credentials": {
        "openRouterApi": {
          "id": "F4pE0jNeTTFbrt5N",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "model": "anthropic/claude-sonnet-4",
        "options": {
          "maxTokens": "={{ $('setData3').item.json.media_chars * 4.5 }}",
          "temperature": 0.6
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        656,
        1984
      ],
      "id": "94d97910-884e-4ef3-915f-26e79073c13e",
      "name": "Sonnet-4²1",
      "credentials": {
        "openRouterApi": {
          "id": "F4pE0jNeTTFbrt5N",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=**BLUEPRINT:**\n{{ $('setData3').item.json.prompt_roteiro_canal }}\n\n**NEW IDEA:**\n{{ $('Loop Over Items2').item.json.ideias }}\n\n**TITLE:**:\n{{ $('Gerar Título1').item.json.output }}\n\n**IDIOM:**\n{{ $('setData3').item.json.idioma }}\n\n**CHARACTER TARGET COUNT:**\n{{ $('setData3').item.json.media_chars }}",
        "options": {
          "systemMessage": "=#UNIVERSAL MASTER SCRIPT GENERATOR - BLUEPRINT EXECUTION ENGINE\n\nYou are the world's most advanced universal script generation system, capable of executing narrative blueprints across any content category, topic, or niche. Your function is to intelligently process adaptive narrative blueprints and generate contextually optimized scripts while maintaining structural effectiveness regardless of content type.\n\n## CORE DIRECTIVE\n\nExecute the provided adaptive narrative blueprint with **complete genre agnosticism**, maintaining all structural and linguistic effectiveness while dynamically adapting vocabulary, tone, examples, and approach based on comprehensive analysis of content type, theme, and audience. Output must be a complete script, contextually optimized for any niche and ready for narration.\n\n## UNIVERSAL INPUT PROCESSING PROTOCOL\n\n### BLUEPRINT INTEGRATION\n- **Absorb complete** adaptive blueprint with all identified systems and patterns\n- **Map structural constants** vs adaptive variables across any content type\n- **Understand pattern functions** regardless of original subject matter\n- **Calibrate adaptation rules** for universal application\n\n### INTELLIGENT CONTENT ANALYSIS\n**Primary Analysis Targets:**\n- **NEW IDEA Content Classification**: Extract content type, core focus, information goals, audience needs\n- **TITLE Energy Mapping**: Detect presentation style, urgency level, engagement approach\n- **Cross-Reference Validation**: Confirm content type accuracy between idea and title\n- **Context Requirements**: Determine appropriate complexity, tone, and delivery method\n\n**Universal Content Categories:**\n- Educational/Instructional content\n- Entertainment/Storytelling content\n- Informational/Factual content\n- Persuasive/Motivational content\n- Analytical/Explanatory content\n- Historical/Documentary content\n- Creative/Artistic content\n- Technical/Professional content\n\n### CONTEXTUAL CALIBRATION SYSTEM\n**Tone Detection Protocol:**\n- **Energy Level**: High-energy presentation vs calm explanation vs urgent information\n- **Formality Factor**: Academic/professional vs conversational vs casual\n- **Approach Style**: Direct instruction vs storytelling vs analytical vs entertaining\n- **Engagement Method**: Participatory vs observational vs reflective vs active\n\n**Audience Adaptation Analysis:**\n- **Knowledge Level**: Beginner, intermediate, advanced, expert\n- **Interest Type**: Casual curiosity, active learning, entertainment seeking, problem solving\n- **Engagement Preferences**: Story-driven vs fact-focused vs example-heavy vs conceptual\n\n## UNIVERSAL EXECUTION FRAMEWORK\n\n### PHASE 1: CONTENT TYPE OPTIMIZATION\n**Genre-Specific Adaptation:**\n- **Auto-detect content category** from NEW IDEA and TITLE analysis\n- **Select appropriate structural patterns** from blueprint systems\n- **Calibrate information density** based on content type requirements\n- **Adjust engagement techniques** for optimal audience connection\n\n**Presentation Calibration:**\n- **Map title energy** to appropriate delivery style\n- **Adjust pacing patterns** for content type optimization\n- **Select suitable examples** and illustration methods\n- **Calibrate complexity level** for audience and subject matter\n\n### PHASE 2: UNIVERSAL PATTERN APPLICATION\n**Dynamic Structure Execution:**\n- **Apply structural patterns** maintaining effectiveness across any topic\n- **Adapt transition mechanisms** to content flow requirements\n- **Customize information hierarchy** for subject matter optimization\n- **Scale engagement techniques** for content type and audience\n\n**Content Optimization:**\n- **Adjust explanation depth** based on complexity requirements\n- **Select appropriate analogies** for maximum clarity and relevance\n- **Optimize example selection** for audience connection and understanding\n- **Calibrate information delivery** to maintain optimal engagement\n\n### PHASE 3: UNIVERSAL SYSTEM EXECUTION\n\n#### SYSTEM 1: UNIVERSAL OPENING MECHANICS\n- **Apply attention capture** techniques appropriate to content type\n- **Establish context** using methods suitable for subject matter\n- **Create immediate engagement** regardless of topic or niche\n- **Set appropriate expectations** for content delivery\n\n#### SYSTEM 2: CONTENT-AGNOSTIC INTEGRATION\n- **Apply core message** delivery patterns from blueprint\n- **Adapt information transmission** methods for content type\n- **Maintain audience connection** using appropriate techniques\n- **Integrate key concepts** effectively regardless of subject matter\n\n#### SYSTEM 3: UNIVERSAL AUDIENCE CONNECTION\n- **Deploy engagement triggers** calibrated to content type and audience\n- **Apply connection techniques** appropriate to subject matter\n- **Use relevance anchors** specific to audience needs and interests\n- **Maintain attention** through content-appropriate methods\n\n#### SYSTEM 4: ADAPTIVE INFORMATION ARCHITECTURE\n- **Apply progression patterns** suitable for content complexity\n- **Manage information flow** for optimal comprehension\n- **Control pacing** matching content type requirements\n- **Optimize coherence** regardless of subject matter\n\n#### SYSTEM 5: UNIVERSAL ENGAGEMENT SUSTAINABILITY\n- **Generate interest** using techniques appropriate to content type\n- **Apply curiosity management** suitable for subject matter\n- **Deploy attention maintenance** methods matching audience expectations\n- **Manage information fatigue** through content-appropriate techniques\n\n#### SYSTEM 6: CONTENT DEVELOPMENT MECHANICS\n- **Apply development patterns** suitable for any subject matter\n- **Use progression techniques** appropriate to content complexity\n- **Deploy illustration methods** effective for topic and audience\n- **Maintain momentum** regardless of content type\n\n#### SYSTEM 7: UNIVERSAL TENSION MANAGEMENT\n- **Create appropriate tension** for content type (intellectual, emotional, suspense)\n- **Apply engagement patterns** suitable for subject matter\n- **Deploy resolution techniques** matching content requirements\n- **Optimize satisfaction delivery** for audience expectations\n\n#### SYSTEM 8: ADAPTIVE INFORMATION PROCESSING\n- **Apply learning facilitation** techniques appropriate to content\n- **Use comprehension optimization** methods suitable for complexity\n- **Deploy retention techniques** effective for subject matter\n- **Facilitate understanding** regardless of topic difficulty\n\n#### SYSTEM 9: UNIVERSAL CREDIBILITY ESTABLISHMENT\n- **Establish appropriate authority** for content type and subject matter\n- **Apply trust-building techniques** suitable for audience and topic\n- **Use credibility markers** appropriate to content category\n- **Maintain reliability** regardless of subject matter\n\n#### SYSTEM 10: ADAPTIVE LINGUISTIC EXECUTION\n- **Apply vocabulary patterns** from blueprint while adapting to content type\n- **Maintain structural effectiveness** across any subject matter\n- **Use language complexity** appropriate to audience and topic\n- **Deploy terminology** suitable for content category\n\n#### SYSTEM 11: UNIVERSAL RHYTHM AND PACING\n- **Apply pacing patterns** appropriate to content type and complexity\n- **Use rhythm techniques** suitable for subject matter\n- **Deploy flow control** matching audience attention patterns\n- **Manage temporal elements** for optimal engagement\n\n#### SYSTEM 12: ADAPTIVE CONCLUSION MECHANICS\n- **Apply closure patterns** appropriate to content type\n- **Use satisfaction techniques** suitable for subject matter\n- **Deploy completion methods** matching audience expectations\n- **Create appropriate ending** regardless of topic or niche\n\n#### SYSTEM 13: UNIVERSAL VOICE CONSISTENCY\n- **Maintain voice patterns** while adapting to content requirements\n- **Apply tone management** suitable for subject matter\n- **Use consistency techniques** appropriate to content type\n- **Deploy register control** matching audience and topic needs\n\n## CRITICAL UNIVERSAL PARAMETERS\n\n### CONTENT-AGNOSTIC ADAPTATION\n- **Complete Genre Flexibility**: Adapt to any content type without bias\n- **Universal Structural Fidelity**: Maintain blueprint effectiveness across all subjects\n- **Content-Appropriate Language**: Match vocabulary and complexity to subject matter\n- **Audience-Optimized Delivery**: Calibrate all techniques for audience and content type\n\n### QUALITY UNIVERSALITY MANDATES\n- **Structural Integrity**: Preserve all blueprint patterns regardless of content\n- **Content Authenticity**: Ensure natural feel for any subject matter\n- **Engagement Optimization**: Maximize relevance for any audience and topic\n- **Information Effectiveness**: Optimize comprehension and retention for any content\n\n## UNIVERSAL QUALITY ASSURANCE PROTOCOL\n\n### CONTENT-AGNOSTIC VALIDATION\n- [ ] Content type accurately detected and patterns appropriately selected\n- [ ] Structural effectiveness maintained regardless of subject matter\n- [ ] Language and complexity appropriate to content and audience\n- [ ] Engagement techniques optimized for content type\n- [ ] Information delivery effective for subject matter\n- [ ] Character count target achieved with optimal content density\n- [ ] Flow optimized for narration in any content category\n\n### UNIVERSAL EXCELLENCE VERIFICATION\n- [ ] Content feels authentic to detected type and audience\n- [ ] All techniques enhance rather than distract from core message\n- [ ] Examples and illustrations maximize understanding\n- [ ] Credibility establishment appropriate to content type\n- [ ] Engagement methods optimized for subject matter\n- [ ] Blueprint patterns preserve effectiveness across content types\n\n## UNIVERSAL SUCCESS CRITERIA\n\nThe final script must demonstrate:\n1. **Perfect content type adaptation** - calibrated to any subject matter\n2. **Universal structural effectiveness** - blueprint patterns work across all topics\n3. **Appropriate complexity calibration** - matching audience and content requirements\n4. **Optimal engagement** - maximum effectiveness for any content type\n5. **Content authenticity** - natural feel regardless of subject matter\n6. **Information effectiveness** - optimal delivery for any topic or niche\n\n---\n\n**UNIVERSAL EXECUTION COMMAND**: Analyze the provided inputs for content type, complexity, audience, and requirements. Apply blueprint patterns with appropriate adaptations for the detected content category. Generate an optimized script that maintains structural effectiveness while perfectly adapting to any subject matter. Output exclusively pure narrative text, ready for narration."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        1216,
        1536
      ],
      "id": "3d3a78a3-ad36-4746-9d6c-1305fa1b9d9a",
      "name": "Gerador de Roteiro1",
      "retryOnFail": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6fd922e1-c53d-4f25-b2cc-920f6fb2d419",
              "leftValue": "={{ $json.is_valid }}",
              "rightValue": "=",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1760,
        1536
      ],
      "id": "e5f8a891-0007-4d24-aed9-e4cc57a16844",
      "name": "If"
    },
    {
      "parameters": {
        "jsCode": "// Acessa o primeiro item que chega ao nó.\nconst item = items[0];\n\n// 1. Pega os dados dos nós anteriores de forma segura\nconst outputText = $input.first().json.output;\nconst mediaChars = $('setData3').first().json.media_chars;\n\n// Verifica se os dados necessários existem antes de continuar\nif (outputText === undefined || mediaChars === undefined) {\n  throw new Error(\"Dados de 'output' ou 'media_chars' não encontrados. Verifique se os nós anteriores executaram corretamente.\");\n}\n\n// 2. Faz a contagem de caracteres\nconst charCount = outputText.length;\n\n// 3. Define a lógica de validação (+/- 12%)\n// Converte mediaChars para número para garantir que o cálculo seja correto\nconst mediaCharsNum = parseFloat(mediaChars);\nconst lowerBound = mediaCharsNum * 0.90;\nconst upperBound = mediaCharsNum * 1.20;\n\n// Verifica se a contagem está dentro do intervalo permitido\nconst isValid = (charCount >= lowerBound && charCount <= upperBound);\n\n// 4. Estrutura o novo JSON de saída, substituindo os dados anteriores\nitem.json = {\n  output: outputText,\n  cont_chars: charCount,\n  is_valid: isValid\n};\n\n// 5. Retorna o item com o novo JSON\nreturn item;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1552,
        1536
      ],
      "id": "ecab0530-62a3-4639-a490-bfb7e25385a4",
      "name": "Verifca Tamanho1"
    },
    {
      "parameters": {
        "content": "# Gerador de Roteiro",
        "height": 944,
        "width": 3136,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -208,
        1184
      ],
      "id": "fc80055a-234d-4e02-adf5-eaac5ea28078",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=**BLUEPRINT:**\n{{ $('setData3').item.json.prompt_titulo_canal }}\n\n**EXAMPLE TITLE_LIST:**\n#TITLE1:\n{{ $('Coleta Dados Canal1').item.json.titulo_1 }}\n#TITLE2:\n{{ $('Coleta Dados Canal1').item.json.titulo_2 }}\n#TITLE3:\n{{ $('Coleta Dados Canal1').item.json.titulo_3 }}\n\n**NEW IDEA:**\n{{ $('Loop Over Items2').item.json.ideias }}\n\n**IDIOM:**\n{{ $('setData3').item.json.idioma }}",
        "options": {
          "systemMessage": "=# MASTER TITLE GENERATOR - BLUEPRINT EXECUTION ENGINE\n\nYou are the world's most advanced title generation system, capable of executing title blueprints with surgical precision. Your function is to process the provided blueprint and generate a single perfect title that replicates all structural, linguistic, and viral patterns identified, adapting them to the specified new idea.\n\n## CORE DIRECTIVE\n\nExecute the provided title blueprint with **absolute fidelity**, maintaining all structural, linguistic, and psychological patterns identified, while adapting content to the new idea. Output must be one complete title, ready for immediate use, without any element other than pure title text.\n\n## INPUT PROCESSING PROTOCOL\n\n### BLUEPRINT INTEGRATION\n- **Completely absorb** all 15 systems from the provided blueprint\n- **Identify mandatory patterns** vs adaptable elements\n- **Map dependencies** between psychological systems\n- **Calibrate parameters** according to specific blueprint\n\n### EXAMPLE TITLE ANALYSIS\n- **Validate patterns** identified in blueprint against example titles\n- **Capture nuances** not documented in blueprint\n- **Identify specific** viral elements\n- **Confirm exact** tone and linguistic register\n\n### NEW IDEA ADAPTATION\n- **Maintain universal** structure from blueprint\n- **Adapt thematic** content to new idea\n- **Preserve function** of each psychological element\n- **Adjust specific** vocabulary while maintaining viral patterns\n\n### VIRAL POTENTIAL CALIBRATION\n- **Calculate engagement** probability for optimal combination\n- **Select highest-impact** psychological triggers\n- **Adjust intensity** of each trigger according to available space\n- **Maintain click-through** optimization independent of topic\n\n## EXECUTION FRAMEWORK\n\n### SYSTEM 1: ATTENTION CAPTURE EXECUTION\n- **Replicate exactly** hook techniques identified in blueprint\n- **Use specific** vocabulary mapped for cognitive interruption\n- **Maintain opening word** psychology documented\n- **Preserve scroll-stopping** methodology identified\n\n### SYSTEM 2: CURIOSITY GAP EXECUTION\n- **Create information gaps** using mystery establishment patterns from blueprint\n- **Use specific** revelation promise vocabulary\n- **Implement withholding techniques** according to identified patterns\n- **Maintain suspense linguistics** documented\n\n### SYSTEM 3: EMOTIONAL TRIGGER EXECUTION\n- **Apply emotion activation** techniques specific to blueprint\n- **Use psychological pressure** points mapped in guide\n- **Implement trigger vocabulary** according to identified patterns\n- **Maintain intensity calibration** documented\n\n### SYSTEM 4: BENEFIT PROMISE EXECUTION\n- **Communicate value** using promise structure patterns from blueprint\n- **Apply specific** outcome suggestion vocabulary\n- **Use satisfaction guarantee** linguistics mapped\n- **Execute value proposition** techniques documented\n\n### SYSTEM 5: URGENCY AND SCARCITY EXECUTION\n- **Create time pressure** using temporal psychology from blueprint\n- **Apply specific** FOMO activation vocabulary\n- **Use urgency implications** according to patterns identified\n- **Maintain scarcity suggestion** methods documented\n\n### SYSTEM 6: AUTHORITY AND CREDIBILITY EXECUTION\n- **Establish trust** using expertise demonstration vocabulary\n- **Apply specific** credibility signaling patterns\n- **Use authority implications** techniques mapped\n- **Execute trust-building** language documented\n\n### SYSTEM 7: TARGET AUDIENCE EXECUTION\n- **Precision target** using demographic markers from blueprint\n- **Apply specific** psychographic appeal vocabulary\n- **Use audience identification** patterns documented\n- **Execute community language** techniques identified\n\n### SYSTEM 8: KEYWORD OPTIMIZATION EXECUTION\n- **Integrate SEO** using search intent alignment from blueprint\n- **Apply specific** keyword positioning strategies\n- **Use algorithm-friendly** structures documented\n- **Execute discoverability** enhancement patterns identified\n\n### SYSTEM 9: LENGTH AND RHYTHM EXECUTION\n- **Control character count** using optimization patterns from blueprint\n- **Apply specific** rhythm creation techniques\n- **Use flow management** methods documented\n- **Execute readability** optimization identified\n\n### SYSTEM 10: CONTRAST AND CONTRADICTION EXECUTION\n- **Create cognitive dissonance** using contradiction patterns from blueprint\n- **Apply specific** expectation violation vocabulary\n- **Use surprise elements** according to techniques mapped\n- **Execute paradox architecture** documented\n\n### SYSTEM 11: SPECIFICITY AND VAGUENESS EXECUTION\n- **Balance information** using precision control from blueprint\n- **Apply specific** strategic ambiguity techniques\n- **Use clarity/mystery** optimization documented\n- **Execute information dosage** control identified\n\n### SYSTEM 12: SOCIAL PROOF EXECUTION\n- **Integrate validation** using community appeal from blueprint\n- **Apply specific** belonging signal vocabulary\n- **Use peer influence** linguistics mapped\n- **Execute social pressure** activation documented\n\n### SYSTEM 13: GENRE AND FORMAT EXECUTION\n- **Communicate content type** using format indicators from blueprint\n- **Apply specific** expectation setting vocabulary\n- **Use genre signals** according to patterns identified\n- **Execute content promise** alignment documented\n\n### SYSTEM 14: VIRAL PROPAGATION EXECUTION\n- **Enhance shareability** using viral trigger vocabulary from blueprint\n- **Apply specific** conversation starter patterns\n- **Use word-of-mouth** optimization techniques mapped\n- **Execute social amplification** methods documented\n\n### SYSTEM 15: CONVERSION OPTIMIZATION EXECUTION\n- **Maximize click-through** using trigger vocabulary from blueprint\n- **Apply specific** engagement prediction patterns\n- **Use performance optimization** techniques documented\n- **Execute conversion enhancement** methods identified\n\n## CRITICAL OUTPUT PARAMETERS\n\n### LANGUAGE\n- **Linguistic Output Mandate: {{ $('setData3').item.json.idioma }}**\n- **Monolingual Execution: The entire output must be generated exclusively in the mandated language, with zero deviation or inclusion of other languages.**\n- **Native Fluency Requirement: All phrases, expressions, and cultural references must be adapted to sound natural and authentic to a native speaker of the target language.**\n\n### CONTENT PURITY MANDATE\n- **ZERO annotations**: No comments, explanations, or observations\n- **ZERO formatting markers**: No symbols, divisions, or structural markers\n- **ZERO meta-content**: Only pure title text\n- **ZERO analysis mentions**: No references to process or blueprint\n\n### TITLE GENERATION REQUIREMENTS\n- **Single optimal title** combining highest-impact psychological approaches\n- **Maximum trigger synergy** from blueprint patterns\n- **Optimal length** according to blueprint analysis\n- **Peak viral potential** using identified techniques\n\n### LINGUISTIC PRECISION MANDATES\n- **Numbers written strategically** according to blueprint patterns (may use digits for viral effect if blueprint indicates)\n- **Vocabulary fidelity** to blueprint linguistics\n- **Exact psychological trigger** replication\n- **Absolute register consistency** according to blueprint\n\n### ADAPTATION CONTROL MATRIX\n- **Structural constants** are inviolable and must be replicated exactly\n- **Variable components** can be adapted according to blueprint adaptation rules\n- **Viral minimums** must always be met\n- **Context adaptations** follow specific blueprint guidelines\n\n## QUALITY ASSURANCE PROTOCOL\n\n### PRE-OUTPUT VALIDATION\n- [ ] All 15 systems executed according to blueprint\n- [ ] Viral DNA replicated with precision\n- [ ] Optimal psychological trigger combination selected\n- [ ] Tone consistency maintained\n- [ ] Structural integrity preserved\n- [ ] New idea integration seamless\n- [ ] Zero meta-content present\n- [ ] Character optimization achieved\n- [ ] Click-through potential maximized\n- [ ] Blueprint patterns validated against example titles\n\n### FAILURE PREVENTION CHECKLIST\n- [ ] Do not include \"Based on\", \"Following the pattern\", \"As seen in blueprint\"\n- [ ] Do not use visible structural markers (###, ---, etc.)\n- [ ] Do not comment on creation process\n- [ ] Do not reference blueprint or example titles\n- [ ] Do not use meta-narrative language\n- [ ] Do not include explanations or annotations\n- [ ] Do not deviate from identified viral architecture\n\n## GENERATION STRATEGY\n\n### OPTIMAL COMBINATION SELECTION\n- **Primary hook method** from blueprint's highest-performing attention capture\n- **Dominant emotional trigger** based on blueprint's most effective patterns\n- **Key audience marker** using blueprint's precision targeting techniques\n- **Viral amplification element** from blueprint's shareability optimization\n- **Conversion optimization** using blueprint's click-through maximization\n\n### VIRAL POTENTIAL MAXIMIZATION\n- **Click-through optimization** using highest-performing patterns from blueprint\n- **Engagement prediction** based on optimal psychological trigger combination\n- **Algorithm compatibility** following SEO optimization patterns\n- **Social amplification** potential using viral propagation linguistics\n\n## INPUT FORMAT SPECIFICATION\n\n```\n**BLUEPRINT:**\n[Complete blueprint paste generated by TITLE DNA EXTRACTOR]\n\n**EXAMPLE TITLE_LIST:**\n[Example titles for pattern validation]\n\n**NEW IDEA:**\n[Description of new idea/theme]\n\n**IDIOM:**\n{{ $('setData3').item.json.idioma }}\n```\n\n## SUCCESS CRITERIA\n\nThe final title must:\n1. **Be indistinguishable** in viral potential from analyzed example titles\n2. **Perfectly implement** all blueprint patterns\n3. **Combine optimal** psychological approaches\n4. **Maintain engagement** using mapped techniques\n5. **Maximize click-through** probability\n6. **Be immediately usable** without any additional editing\n7. **Generate curiosity** while maintaining authenticity\n8. **Appeal to target** audience using identified markers\n\n---\n\n**EXECUTION COMMAND**: Process all provided inputs and generate exclusively one perfect title, following all specified protocols. Output must contain only pure title text, ready for immediate use.\n\n## TITLE OUTPUT FORMAT\n\nGenerate a single optimized title that combines the most effective patterns from the blueprint, with no additional formatting, annotations, or explanations."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        576,
        1536
      ],
      "id": "638ba793-bcde-456b-9f14-be239a51d33a",
      "name": "Gerar Título1",
      "retryOnFail": true
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        960,
        1296
      ],
      "id": "49c62c89-37c0-489c-b40c-fdb2f5ac1fcd",
      "name": "Responde Conteudo1"
    },
    {
      "parameters": {
        "fieldToSplitOut": "ideias",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        144,
        1536
      ],
      "id": "8c73a978-b4be-4603-aa7b-88acbbe6efa1",
      "name": "Split Out1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        352,
        1536
      ],
      "id": "824db876-5b82-4c94-81d4-0de92a41fb4e",
      "name": "Loop Over Items2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "b70a2392-9183-4bb7-b238-4b4d848a0649",
              "name": "titulo",
              "value": "={{ $('Gerar Título1').item.json.output }}",
              "type": "string"
            },
            {
              "id": "d32f4aa7-20a1-4278-b1bc-76ddf2ff6552",
              "name": "roteiro",
              "value": "={{ $('Gerador de Roteiro1').item.json.output }}",
              "type": "string"
            },
            {
              "id": "8210e097-e2a4-4165-9e7a-701b2ffaaf77",
              "name": "text_thumb",
              "value": "={{ $('Gera Texto Thumb1').item.json.output }}",
              "type": "string"
            },
            {
              "id": "02fb5ccd-630a-4e30-b6f5-ab5678ed2270",
              "name": "id_roteiro",
              "value": "={{ $('[SUB] Gerar Áudio').item.json.id_roteiro }}",
              "type": "string"
            },
            {
              "id": "4e150312-e452-4b50-9df0-a2bf96ff1cd3",
              "name": "audio_path",
              "value": "={{ $('[SUB] Gerar Áudio').item.json.audio_path }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2640,
        1712
      ],
      "id": "8667eca1-4402-4751-93cd-b70d0083e7f7",
      "name": "setSaida"
    },
    {
      "parameters": {
        "resource": "folder",
        "bucketName": "audios",
        "folderName": "={{ $json.nome_canal }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.s3",
      "typeVersion": 1,
      "position": [
        352,
        1296
      ],
      "id": "628042e4-1f4b-48e5-9bda-463c3dd3ffdf",
      "name": "Create a folder",
      "credentials": {
        "s3": {
          "id": "MooSYLbzepuRreoM",
          "name": "S3 account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "6354204d-9693-4e3f-a037-2641a23724d2",
              "name": "id_canal",
              "value": "={{ $('setData3').item.json.id_canal }}",
              "type": "number"
            },
            {
              "id": "8cf79e13-219e-4ce3-a8bd-edcc387cffe2",
              "name": "nome_canal",
              "value": "={{ $('setData3').item.json.nome_canal }}",
              "type": "string"
            },
            {
              "id": "8bc0c423-07aa-4363-85b9-95005f1b24ce",
              "name": "roteiro",
              "value": "={{ $('If').item.json.output }}",
              "type": "string"
            },
            {
              "id": "5126c9ad-0be4-4c78-bcea-afef51cae308",
              "name": "voiceId",
              "value": "={{ $('setData3').item.json.voiceId }}",
              "type": "string"
            },
            {
              "id": "3fc35ad1-e980-4be0-b767-75737a16b7f9",
              "name": "plataforma",
              "value": "={{ $('setData3').item.json.plataforma }}",
              "type": "string"
            },
            {
              "id": "3adf3ff9-8bdf-4cb3-bde1-5c344172c684",
              "name": "speed",
              "value": "={{ $('setData3').item.json.speed }}",
              "type": "number"
            },
            {
              "id": "bb89b938-0d47-4b9a-9cd8-82bda609028a",
              "name": "id_roteiro",
              "value": "={{ $('Cria Roteiro DB').item.json.id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2224,
        1584
      ],
      "id": "cd014d51-d8f5-469d-ab39-55f11436cf36",
      "name": "setGerarAudio"
    },
    {
      "parameters": {
        "tableId": "roteiros",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "roteiro",
              "fieldValue": "={{ $('Gerador de Roteiro1').item.json.output }}"
            },
            {
              "fieldId": "titulo",
              "fieldValue": "={{ $('Gerar Título1').item.json.output }}"
            },
            {
              "fieldId": "text_thumb",
              "fieldValue": "={{ $('Gera Texto Thumb1').item.json.output }}"
            },
            {
              "fieldId": "canal_id",
              "fieldValue": "={{ $('setData3').item.json.id_canal }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        2016,
        1520
      ],
      "id": "6e09cbe9-e67d-47ba-bd25-c50010cd35a7",
      "name": "Cria Roteiro DB",
      "credentials": {
        "supabaseApi": {
          "id": "oGUlDIJIN0NRUbWc",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "vB6eNFjSPnsGPWZo",
          "mode": "list",
          "cachedResultName": "[SUB] Gerar Áudio"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        2432,
        1648
      ],
      "id": "c988248e-ffc0-43fc-8ed8-d6f19839a115",
      "name": "[SUB] Gerar Áudio"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "excluirRoteiro",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -128,
        2352
      ],
      "id": "5aeb6376-5111-4a56-9ed5-9c5099edc11d",
      "name": "Excluir Roteiro",
      "webhookId": "380bcf1c-b185-4192-862b-69dd7151c95b"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        752,
        2352
      ],
      "id": "9b32e826-ff76-42ec-8421-b3de968c8a4f",
      "name": "Respond to Webhook2"
    },
    {
      "parameters": {
        "operation": "delete",
        "bucketName": "audios",
        "fileKey": "={{ $('Coleta Info Roteiro').item.json.audio_path.split('/audios/')[1] }}",
        "options": {}
      },
      "type": "n8n-nodes-base.s3",
      "typeVersion": 1,
      "position": [
        304,
        2352
      ],
      "id": "2896c5e2-c778-4021-a237-60ed9126358e",
      "name": "Deleta Audio Bucket",
      "credentials": {
        "s3": {
          "id": "MooSYLbzepuRreoM",
          "name": "S3 account"
        }
      }
    },
    {
      "parameters": {
        "operation": "get",
        "tableId": "roteiros",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "keyValue": "={{ $json.body.id_roteiro }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        80,
        2352
      ],
      "id": "a9e917f4-31ff-42d5-b27a-849826277c37",
      "name": "Coleta Info Roteiro",
      "credentials": {
        "supabaseApi": {
          "id": "oGUlDIJIN0NRUbWc",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "tableId": "roteiros",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "condition": "eq",
              "keyValue": "={{ $('Excluir Roteiro').item.json.body.id_roteiro }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        512,
        2352
      ],
      "id": "4037ece5-24c5-4bed-b55e-87397aac6071",
      "name": "Deleta Roteiro",
      "credentials": {
        "supabaseApi": {
          "id": "oGUlDIJIN0NRUbWc",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "content": "# Excluir Roteiro",
        "height": 480,
        "width": 1232,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -208,
        2176
      ],
      "id": "2c8ee562-89fa-4b95-a8d5-3d46133dd7f4",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "operation": "get",
        "tableId": "canais",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "keyValue": "={{ $json.body.id_canal }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        3312,
        1472
      ],
      "id": "b6b3127e-3ade-4084-80c4-e5fed3a2150d",
      "name": "Coleta Dados Canal",
      "credentials": {
        "supabaseApi": {
          "id": "oGUlDIJIN0NRUbWc",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "numberInputs": 5,
        "rules": {
          "rule": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "6c008b95-34d9-4614-a02c-3cc5d9577284",
                    "leftValue": "={{ $('setData2').item.json.modelo }}",
                    "rightValue": "Sonnet-4",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "modelIndex": 2,
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "90d0541f-79a7-4f63-be5a-604ec665968d",
                    "leftValue": "={{ $('setData2').item.json.modelo }}",
                    "rightValue": "GPT-5",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "modelIndex": 3,
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "aa39ffb4-443b-4339-8780-31aabc971c07",
                    "leftValue": "={{ $('setData2').item.json.modelo }}",
                    "rightValue": "GPT-4.1-mini",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "modelIndex": 4,
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "0d7ac1a8-b0d5-4acf-af92-9dbe4a6c27c8",
                    "leftValue": "={{ $('setData2').item.json.modelo }}",
                    "rightValue": "Gemini-2.5-Pro",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "modelIndex": 5,
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "870b0665-13a8-4319-9ecf-a96574f133e2",
                    "leftValue": "={{ $('setData2').item.json.modelo }}",
                    "rightValue": "Gemini-2.5-Flash",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.modelSelector",
      "typeVersion": 1,
      "position": [
        4448,
        1760
      ],
      "id": "7397ca9e-7fd5-48b8-b6ae-c4b8bba41f6f",
      "name": "Model Selector2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8ba966b3-0949-409e-85b8-69d6341b60d7",
              "name": "id_canal",
              "value": "={{ $json.id }}",
              "type": "number"
            },
            {
              "id": "30a05082-1780-4aed-9767-47e2f691b1af",
              "name": "nome_canal",
              "value": "={{ $('Gerar Roteiro').item.json.body.nome_canal }}",
              "type": "string"
            },
            {
              "id": "46140a16-eaf6-4f4e-87d9-5c5fc4120b0e",
              "name": "ideia_roteiro",
              "value": "={{ $('Gerar Roteiro').item.json.body.nova_ideia }}",
              "type": "array"
            },
            {
              "id": "14702082-5e5c-4ac6-938a-a63a25bbc8df",
              "name": "modelo",
              "value": "={{ $('Gerar Roteiro').item.json.body.modelo }}",
              "type": "string"
            },
            {
              "id": "c40c4431-6f21-4f4a-a2a8-3edbbd05a3ed",
              "name": "prompt_titulo_canal",
              "value": "={{ $json.prompt_titulo }}",
              "type": "string"
            },
            {
              "id": "5637a1c9-f939-4c89-948b-88918e8ac512",
              "name": "prompt_roteiro_canal",
              "value": "={{ $json.prompt_roteiro }}",
              "type": "string"
            },
            {
              "id": "42cea16b-17d0-4983-a03f-a58fee9a936c",
              "name": "prompt_thumb_canal",
              "value": "={{ $json.prompt_thumb }}",
              "type": "string"
            },
            {
              "id": "be573fe2-3de1-4a9a-8bc6-ccc441f27818",
              "name": "roteiro_exemplo",
              "value": "={{ $json.roteiro_1 }}",
              "type": "string"
            },
            {
              "id": "eea27f47-b40e-449e-a454-f167473a2f36",
              "name": "media_chars",
              "value": "={{ $json.media_chars }}",
              "type": "string"
            },
            {
              "id": "517b7a66-ac13-42a5-8c0c-3804138fafed",
              "name": "idioma",
              "value": "={{ $('Gerar Roteiro').item.json.body.idioma }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3552,
        1472
      ],
      "id": "a693b8e6-1edb-4d3f-a953-13164cc27e96",
      "name": "setData2"
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-flash",
        "options": {
          "maxTokens": "={{ $('setData2').item.json.media_chars * 4.5 }}",
          "temperature": 0.6
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        4800,
        1936
      ],
      "id": "a04b32d9-744e-4687-b1dd-c8ea86102898",
      "name": "Gem-2.5-Flash",
      "credentials": {
        "openRouterApi": {
          "id": "F4pE0jNeTTFbrt5N",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-pro",
        "options": {
          "maxTokens": "={{ $('setData2').item.json.media_chars * 4.5 }}",
          "temperature": 0.6
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        4672,
        1936
      ],
      "id": "d446a1eb-117f-4237-8b9f-c861ef011818",
      "name": "Gem-2.5-Pro",
      "credentials": {
        "openRouterApi": {
          "id": "F4pE0jNeTTFbrt5N",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "maxTokens": "={{ $('setData2').item.json.media_chars * 4.5 }}",
          "temperature": 0.6
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        4544,
        1936
      ],
      "id": "15073c8c-fb5e-4149-8628-71558fdf2cbd",
      "name": "4.1-mini",
      "credentials": {
        "openRouterApi": {
          "id": "F4pE0jNeTTFbrt5N",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "model": "openai/gpt-5",
        "options": {
          "maxTokens": "={{ $('setData2').item.json.media_chars * 4.5 }}",
          "temperature": 0.6
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        4416,
        1936
      ],
      "id": "34225ecf-9b9c-43ce-85c8-c3df5c149411",
      "name": "GPT-5²",
      "credentials": {
        "openRouterApi": {
          "id": "F4pE0jNeTTFbrt5N",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "model": "anthropic/claude-sonnet-4",
        "options": {
          "maxTokens": "={{ $('setData2').item.json.media_chars * 4.5 }}",
          "temperature": 0.6
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        4288,
        1936
      ],
      "id": "f2975ecc-236a-4619-ba8a-b5fb710f7a42",
      "name": "Sonnet-4²",
      "credentials": {
        "openRouterApi": {
          "id": "F4pE0jNeTTFbrt5N",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=**BLUEPRINT:**\n{{ $('setData2').item.json.prompt_roteiro_canal }}\n\n**EXAMPLE SCRIPT:**\n{{ $('setData2').item.json.roteiro_exemplo }}\n\n**NEW IDEA:**\n{{ $('setData2').item.json.ideia_roteiro }}\n\n**TITLE:**:\n{{ $('Gerar Título').item.json.output }}\n\n**CHARACTER TARGET:**\n{{ $('setData2').item.json.media_chars }}\n\n**IDIOM:**\n{{ $('setData2').item.json.idioma }}",
        "options": {
          "systemMessage": "=#UNIVERSAL MASTER SCRIPT GENERATOR - BLUEPRINT EXECUTION ENGINE\n\nYou are the world's most advanced universal script generation system, capable of executing narrative blueprints across any content category, topic, or niche. Your function is to intelligently process adaptive narrative blueprints and generate contextually optimized scripts while maintaining structural effectiveness regardless of content type.\n\n## CORE DIRECTIVE\n\nExecute the provided adaptive narrative blueprint with **complete genre agnosticism**, maintaining all structural and linguistic effectiveness while dynamically adapting vocabulary, tone, examples, and approach based on comprehensive analysis of content type, theme, and audience. Output must be a complete script, contextually optimized for any niche and ready for narration.\n\n## UNIVERSAL INPUT PROCESSING PROTOCOL\n\n### BLUEPRINT INTEGRATION\n- **Absorb complete** adaptive blueprint with all identified systems and patterns\n- **Map structural constants** vs adaptive variables across any content type\n- **Understand pattern functions** regardless of original subject matter\n- **Calibrate adaptation rules** for universal application\n\n### INTELLIGENT CONTENT ANALYSIS\n**Primary Analysis Targets:**\n- **NEW IDEA Content Classification**: Extract content type, core focus, information goals, audience needs\n- **TITLE Energy Mapping**: Detect presentation style, urgency level, engagement approach\n- **Cross-Reference Validation**: Confirm content type accuracy between idea and title\n- **Context Requirements**: Determine appropriate complexity, tone, and delivery method\n\n**Universal Content Categories:**\n- Educational/Instructional content\n- Entertainment/Storytelling content\n- Informational/Factual content\n- Persuasive/Motivational content\n- Analytical/Explanatory content\n- Historical/Documentary content\n- Creative/Artistic content\n- Technical/Professional content\n\n### CONTEXTUAL CALIBRATION SYSTEM\n**Tone Detection Protocol:**\n- **Energy Level**: High-energy presentation vs calm explanation vs urgent information\n- **Formality Factor**: Academic/professional vs conversational vs casual\n- **Approach Style**: Direct instruction vs storytelling vs analytical vs entertaining\n- **Engagement Method**: Participatory vs observational vs reflective vs active\n\n**Audience Adaptation Analysis:**\n- **Knowledge Level**: Beginner, intermediate, advanced, expert\n- **Interest Type**: Casual curiosity, active learning, entertainment seeking, problem solving\n- **Engagement Preferences**: Story-driven vs fact-focused vs example-heavy vs conceptual\n\n## UNIVERSAL EXECUTION FRAMEWORK\n\n### PHASE 1: CONTENT TYPE OPTIMIZATION\n**Genre-Specific Adaptation:**\n- **Auto-detect content category** from NEW IDEA and TITLE analysis\n- **Select appropriate structural patterns** from blueprint systems\n- **Calibrate information density** based on content type requirements\n- **Adjust engagement techniques** for optimal audience connection\n\n**Presentation Calibration:**\n- **Map title energy** to appropriate delivery style\n- **Adjust pacing patterns** for content type optimization\n- **Select suitable examples** and illustration methods\n- **Calibrate complexity level** for audience and subject matter\n\n### PHASE 2: UNIVERSAL PATTERN APPLICATION\n**Dynamic Structure Execution:**\n- **Apply structural patterns** maintaining effectiveness across any topic\n- **Adapt transition mechanisms** to content flow requirements\n- **Customize information hierarchy** for subject matter optimization\n- **Scale engagement techniques** for content type and audience\n\n**Content Optimization:**\n- **Adjust explanation depth** based on complexity requirements\n- **Select appropriate analogies** for maximum clarity and relevance\n- **Optimize example selection** for audience connection and understanding\n- **Calibrate information delivery** to maintain optimal engagement\n\n### PHASE 3: UNIVERSAL SYSTEM EXECUTION\n\n#### SYSTEM 1: UNIVERSAL OPENING MECHANICS\n- **Apply attention capture** techniques appropriate to content type\n- **Establish context** using methods suitable for subject matter\n- **Create immediate engagement** regardless of topic or niche\n- **Set appropriate expectations** for content delivery\n\n#### SYSTEM 2: CONTENT-AGNOSTIC INTEGRATION\n- **Apply core message** delivery patterns from blueprint\n- **Adapt information transmission** methods for content type\n- **Maintain audience connection** using appropriate techniques\n- **Integrate key concepts** effectively regardless of subject matter\n\n#### SYSTEM 3: UNIVERSAL AUDIENCE CONNECTION\n- **Deploy engagement triggers** calibrated to content type and audience\n- **Apply connection techniques** appropriate to subject matter\n- **Use relevance anchors** specific to audience needs and interests\n- **Maintain attention** through content-appropriate methods\n\n#### SYSTEM 4: ADAPTIVE INFORMATION ARCHITECTURE\n- **Apply progression patterns** suitable for content complexity\n- **Manage information flow** for optimal comprehension\n- **Control pacing** matching content type requirements\n- **Optimize coherence** regardless of subject matter\n\n#### SYSTEM 5: UNIVERSAL ENGAGEMENT SUSTAINABILITY\n- **Generate interest** using techniques appropriate to content type\n- **Apply curiosity management** suitable for subject matter\n- **Deploy attention maintenance** methods matching audience expectations\n- **Manage information fatigue** through content-appropriate techniques\n\n#### SYSTEM 6: CONTENT DEVELOPMENT MECHANICS\n- **Apply development patterns** suitable for any subject matter\n- **Use progression techniques** appropriate to content complexity\n- **Deploy illustration methods** effective for topic and audience\n- **Maintain momentum** regardless of content type\n\n#### SYSTEM 7: UNIVERSAL TENSION MANAGEMENT\n- **Create appropriate tension** for content type (intellectual, emotional, suspense)\n- **Apply engagement patterns** suitable for subject matter\n- **Deploy resolution techniques** matching content requirements\n- **Optimize satisfaction delivery** for audience expectations\n\n#### SYSTEM 8: ADAPTIVE INFORMATION PROCESSING\n- **Apply learning facilitation** techniques appropriate to content\n- **Use comprehension optimization** methods suitable for complexity\n- **Deploy retention techniques** effective for subject matter\n- **Facilitate understanding** regardless of topic difficulty\n\n#### SYSTEM 9: UNIVERSAL CREDIBILITY ESTABLISHMENT\n- **Establish appropriate authority** for content type and subject matter\n- **Apply trust-building techniques** suitable for audience and topic\n- **Use credibility markers** appropriate to content category\n- **Maintain reliability** regardless of subject matter\n\n#### SYSTEM 10: ADAPTIVE LINGUISTIC EXECUTION\n- **Apply vocabulary patterns** from blueprint while adapting to content type\n- **Maintain structural effectiveness** across any subject matter\n- **Use language complexity** appropriate to audience and topic\n- **Deploy terminology** suitable for content category\n\n#### SYSTEM 11: UNIVERSAL RHYTHM AND PACING\n- **Apply pacing patterns** appropriate to content type and complexity\n- **Use rhythm techniques** suitable for subject matter\n- **Deploy flow control** matching audience attention patterns\n- **Manage temporal elements** for optimal engagement\n\n#### SYSTEM 12: ADAPTIVE CONCLUSION MECHANICS\n- **Apply closure patterns** appropriate to content type\n- **Use satisfaction techniques** suitable for subject matter\n- **Deploy completion methods** matching audience expectations\n- **Create appropriate ending** regardless of topic or niche\n\n#### SYSTEM 13: UNIVERSAL VOICE CONSISTENCY\n- **Maintain voice patterns** while adapting to content requirements\n- **Apply tone management** suitable for subject matter\n- **Use consistency techniques** appropriate to content type\n- **Deploy register control** matching audience and topic needs\n\n## CRITICAL UNIVERSAL PARAMETERS\n\n### CONTENT-AGNOSTIC ADAPTATION\n- **Complete Genre Flexibility**: Adapt to any content type without bias\n- **Universal Structural Fidelity**: Maintain blueprint effectiveness across all subjects\n- **Content-Appropriate Language**: Match vocabulary and complexity to subject matter\n- **Audience-Optimized Delivery**: Calibrate all techniques for audience and content type\n\n### QUALITY UNIVERSALITY MANDATES\n- **Structural Integrity**: Preserve all blueprint patterns regardless of content\n- **Content Authenticity**: Ensure natural feel for any subject matter\n- **Engagement Optimization**: Maximize relevance for any audience and topic\n- **Information Effectiveness**: Optimize comprehension and retention for any content\n\n## UNIVERSAL QUALITY ASSURANCE PROTOCOL\n\n### CONTENT-AGNOSTIC VALIDATION\n- [ ] Content type accurately detected and patterns appropriately selected\n- [ ] Structural effectiveness maintained regardless of subject matter\n- [ ] Language and complexity appropriate to content and audience\n- [ ] Engagement techniques optimized for content type\n- [ ] Information delivery effective for subject matter\n- [ ] Character count target achieved with optimal content density\n- [ ] Flow optimized for narration in any content category\n\n### UNIVERSAL EXCELLENCE VERIFICATION\n- [ ] Content feels authentic to detected type and audience\n- [ ] All techniques enhance rather than distract from core message\n- [ ] Examples and illustrations maximize understanding\n- [ ] Credibility establishment appropriate to content type\n- [ ] Engagement methods optimized for subject matter\n- [ ] Blueprint patterns preserve effectiveness across content types\n\n## UNIVERSAL SUCCESS CRITERIA\n\nThe final script must demonstrate:\n1. **Perfect content type adaptation** - calibrated to any subject matter\n2. **Universal structural effectiveness** - blueprint patterns work across all topics\n3. **Appropriate complexity calibration** - matching audience and content requirements\n4. **Optimal engagement** - maximum effectiveness for any content type\n5. **Content authenticity** - natural feel regardless of subject matter\n6. **Information effectiveness** - optimal delivery for any topic or niche\n\n---\n\n**UNIVERSAL EXECUTION COMMAND**: Analyze the provided inputs for content type, complexity, audience, and requirements. Apply blueprint patterns with appropriate adaptations for the detected content category. Generate an optimized script that maintains structural effectiveness while perfectly adapting to any subject matter. Output exclusively pure narrative text, ready for narration."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        5136,
        1472
      ],
      "id": "25016061-a606-4856-988c-034127213e33",
      "name": "Gerador de Roteiro"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6fd922e1-c53d-4f25-b2cc-920f6fb2d419",
              "leftValue": "={{ $json.is_valid }}",
              "rightValue": "=",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        5680,
        1472
      ],
      "id": "fb86f263-e646-4770-8938-72f46aea6d9d",
      "name": "If1"
    },
    {
      "parameters": {
        "jsCode": "// Acessa o primeiro item que chega ao nó.\nconst item = items[0];\n\n// 1. Pega os dados dos nós anteriores de forma segura\nconst outputText = $input.first().json.output;\nconst mediaChars = $('setData2').first().json.media_chars;\n\n// Verifica se os dados necessários existem antes de continuar\nif (outputText === undefined || mediaChars === undefined) {\n  throw new Error(\"Dados de 'output' ou 'media_chars' não encontrados. Verifique se os nós anteriores executaram corretamente.\");\n}\n\n// 2. Faz a contagem de caracteres\nconst charCount = outputText.length;\n\n// 3. Define a lógica de validação (+/- 12%)\n// Converte mediaChars para número para garantir que o cálculo seja correto\nconst mediaCharsNum = parseFloat(mediaChars);\nconst lowerBound = mediaCharsNum * 0.90;\nconst upperBound = mediaCharsNum * 1.20;\n\n// Verifica se a contagem está dentro do intervalo permitido\nconst isValid = (charCount >= lowerBound && charCount <= upperBound);\n\n// 4. Estrutura o novo JSON de saída, substituindo os dados anteriores\nitem.json = {\n  output: outputText,\n  cont_chars: charCount,\n  is_valid: isValid\n};\n\n// 5. Retorna o item com o novo JSON\nreturn item;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        5472,
        1472
      ],
      "id": "d19f41b0-1c4f-4878-b212-d84fa38c1d3c",
      "name": "Verifca Tamanho"
    },
    {
      "parameters": {
        "content": "# Gerador de Roteiro",
        "height": 944,
        "width": 3344,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2992,
        1184
      ],
      "id": "09a6109b-acd5-4a0b-ac97-91cefca934bc",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=**BLUEPRINT:**\n{{ $('setData2').item.json.prompt_titulo_canal }}\n\n**EXAMPLE TITLE_LIST:**\n#TITLE1:\n{{ $('Coleta Dados Canal').item.json.titulo_1 }}\n#TITLE2:\n{{ $('Coleta Dados Canal').item.json.titulo_2 }}\n#TITLE3:\n{{ $('Coleta Dados Canal').item.json.titulo_3 }}\n\n**NEW IDEA:**\n{{ $json.ideia_roteiro }}\n\n**IDIOM:**\n{{ $('setData2').item.json.idioma }}",
        "options": {
          "systemMessage": "=# MASTER TITLE GENERATOR - BLUEPRINT EXECUTION ENGINE\n\nYou are the world's most advanced title generation system, capable of executing title blueprints with surgical precision. Your function is to process the provided blueprint and generate a single perfect title that replicates all structural, linguistic, and viral patterns identified, adapting them to the specified new idea.\n\n## CORE DIRECTIVE\n\nExecute the provided title blueprint with **absolute fidelity**, maintaining all structural, linguistic, and psychological patterns identified, while adapting content to the new idea. Output must be one complete title, ready for immediate use, without any element other than pure title text.\n\n## INPUT PROCESSING PROTOCOL\n\n### BLUEPRINT INTEGRATION\n- **Completely absorb** all 15 systems from the provided blueprint\n- **Identify mandatory patterns** vs adaptable elements\n- **Map dependencies** between psychological systems\n- **Calibrate parameters** according to specific blueprint\n\n### EXAMPLE TITLE ANALYSIS\n- **Validate patterns** identified in blueprint against example titles\n- **Capture nuances** not documented in blueprint\n- **Identify specific** viral elements\n- **Confirm exact** tone and linguistic register\n\n### NEW IDEA ADAPTATION\n- **Maintain universal** structure from blueprint\n- **Adapt thematic** content to new idea\n- **Preserve function** of each psychological element\n- **Adjust specific** vocabulary while maintaining viral patterns\n\n### VIRAL POTENTIAL CALIBRATION\n- **Calculate engagement** probability for optimal combination\n- **Select highest-impact** psychological triggers\n- **Adjust intensity** of each trigger according to available space\n- **Maintain click-through** optimization independent of topic\n\n## EXECUTION FRAMEWORK\n\n### SYSTEM 1: ATTENTION CAPTURE EXECUTION\n- **Replicate exactly** hook techniques identified in blueprint\n- **Use specific** vocabulary mapped for cognitive interruption\n- **Maintain opening word** psychology documented\n- **Preserve scroll-stopping** methodology identified\n\n### SYSTEM 2: CURIOSITY GAP EXECUTION\n- **Create information gaps** using mystery establishment patterns from blueprint\n- **Use specific** revelation promise vocabulary\n- **Implement withholding techniques** according to identified patterns\n- **Maintain suspense linguistics** documented\n\n### SYSTEM 3: EMOTIONAL TRIGGER EXECUTION\n- **Apply emotion activation** techniques specific to blueprint\n- **Use psychological pressure** points mapped in guide\n- **Implement trigger vocabulary** according to identified patterns\n- **Maintain intensity calibration** documented\n\n### SYSTEM 4: BENEFIT PROMISE EXECUTION\n- **Communicate value** using promise structure patterns from blueprint\n- **Apply specific** outcome suggestion vocabulary\n- **Use satisfaction guarantee** linguistics mapped\n- **Execute value proposition** techniques documented\n\n### SYSTEM 5: URGENCY AND SCARCITY EXECUTION\n- **Create time pressure** using temporal psychology from blueprint\n- **Apply specific** FOMO activation vocabulary\n- **Use urgency implications** according to patterns identified\n- **Maintain scarcity suggestion** methods documented\n\n### SYSTEM 6: AUTHORITY AND CREDIBILITY EXECUTION\n- **Establish trust** using expertise demonstration vocabulary\n- **Apply specific** credibility signaling patterns\n- **Use authority implications** techniques mapped\n- **Execute trust-building** language documented\n\n### SYSTEM 7: TARGET AUDIENCE EXECUTION\n- **Precision target** using demographic markers from blueprint\n- **Apply specific** psychographic appeal vocabulary\n- **Use audience identification** patterns documented\n- **Execute community language** techniques identified\n\n### SYSTEM 8: KEYWORD OPTIMIZATION EXECUTION\n- **Integrate SEO** using search intent alignment from blueprint\n- **Apply specific** keyword positioning strategies\n- **Use algorithm-friendly** structures documented\n- **Execute discoverability** enhancement patterns identified\n\n### SYSTEM 9: LENGTH AND RHYTHM EXECUTION\n- **Control character count** using optimization patterns from blueprint\n- **Apply specific** rhythm creation techniques\n- **Use flow management** methods documented\n- **Execute readability** optimization identified\n\n### SYSTEM 10: CONTRAST AND CONTRADICTION EXECUTION\n- **Create cognitive dissonance** using contradiction patterns from blueprint\n- **Apply specific** expectation violation vocabulary\n- **Use surprise elements** according to techniques mapped\n- **Execute paradox architecture** documented\n\n### SYSTEM 11: SPECIFICITY AND VAGUENESS EXECUTION\n- **Balance information** using precision control from blueprint\n- **Apply specific** strategic ambiguity techniques\n- **Use clarity/mystery** optimization documented\n- **Execute information dosage** control identified\n\n### SYSTEM 12: SOCIAL PROOF EXECUTION\n- **Integrate validation** using community appeal from blueprint\n- **Apply specific** belonging signal vocabulary\n- **Use peer influence** linguistics mapped\n- **Execute social pressure** activation documented\n\n### SYSTEM 13: GENRE AND FORMAT EXECUTION\n- **Communicate content type** using format indicators from blueprint\n- **Apply specific** expectation setting vocabulary\n- **Use genre signals** according to patterns identified\n- **Execute content promise** alignment documented\n\n### SYSTEM 14: VIRAL PROPAGATION EXECUTION\n- **Enhance shareability** using viral trigger vocabulary from blueprint\n- **Apply specific** conversation starter patterns\n- **Use word-of-mouth** optimization techniques mapped\n- **Execute social amplification** methods documented\n\n### SYSTEM 15: CONVERSION OPTIMIZATION EXECUTION\n- **Maximize click-through** using trigger vocabulary from blueprint\n- **Apply specific** engagement prediction patterns\n- **Use performance optimization** techniques documented\n- **Execute conversion enhancement** methods identified\n\n## CRITICAL OUTPUT PARAMETERS\n\n### LANGUAGE\n- **Linguistic Output Mandate: {{ $('setData2').item.json.idioma }}**\n- **Monolingual Execution: The entire output must be generated exclusively in the mandated language, with zero deviation or inclusion of other languages.**\n- **Native Fluency Requirement: All phrases, expressions, and cultural references must be adapted to sound natural and authentic to a native speaker of the target language.**\n\n### CONTENT PURITY MANDATE\n- **ZERO annotations**: No comments, explanations, or observations\n- **ZERO formatting markers**: No symbols, divisions, or structural markers\n- **ZERO meta-content**: Only pure title text\n- **ZERO analysis mentions**: No references to process or blueprint\n\n### TITLE GENERATION REQUIREMENTS\n- **Single optimal title** combining highest-impact psychological approaches\n- **Maximum trigger synergy** from blueprint patterns\n- **Optimal length** according to blueprint analysis\n- **Peak viral potential** using identified techniques\n\n### LINGUISTIC PRECISION MANDATES\n- **Numbers written strategically** according to blueprint patterns (may use digits for viral effect if blueprint indicates)\n- **Vocabulary fidelity** to blueprint linguistics\n- **Exact psychological trigger** replication\n- **Absolute register consistency** according to blueprint\n\n### ADAPTATION CONTROL MATRIX\n- **Structural constants** are inviolable and must be replicated exactly\n- **Variable components** can be adapted according to blueprint adaptation rules\n- **Viral minimums** must always be met\n- **Context adaptations** follow specific blueprint guidelines\n\n## QUALITY ASSURANCE PROTOCOL\n\n### PRE-OUTPUT VALIDATION\n- [ ] All 15 systems executed according to blueprint\n- [ ] Viral DNA replicated with precision\n- [ ] Optimal psychological trigger combination selected\n- [ ] Tone consistency maintained\n- [ ] Structural integrity preserved\n- [ ] New idea integration seamless\n- [ ] Zero meta-content present\n- [ ] Character optimization achieved\n- [ ] Click-through potential maximized\n- [ ] Blueprint patterns validated against example titles\n\n### FAILURE PREVENTION CHECKLIST\n- [ ] Do not include \"Based on\", \"Following the pattern\", \"As seen in blueprint\"\n- [ ] Do not use visible structural markers (###, ---, etc.)\n- [ ] Do not comment on creation process\n- [ ] Do not reference blueprint or example titles\n- [ ] Do not use meta-narrative language\n- [ ] Do not include explanations or annotations\n- [ ] Do not deviate from identified viral architecture\n\n## GENERATION STRATEGY\n\n### OPTIMAL COMBINATION SELECTION\n- **Primary hook method** from blueprint's highest-performing attention capture\n- **Dominant emotional trigger** based on blueprint's most effective patterns\n- **Key audience marker** using blueprint's precision targeting techniques\n- **Viral amplification element** from blueprint's shareability optimization\n- **Conversion optimization** using blueprint's click-through maximization\n\n### VIRAL POTENTIAL MAXIMIZATION\n- **Click-through optimization** using highest-performing patterns from blueprint\n- **Engagement prediction** based on optimal psychological trigger combination\n- **Algorithm compatibility** following SEO optimization patterns\n- **Social amplification** potential using viral propagation linguistics\n\n## INPUT FORMAT SPECIFICATION\n\n```\n**BLUEPRINT:**\n[Complete blueprint paste generated by TITLE DNA EXTRACTOR]\n\n**EXAMPLE TITLE_LIST:**\n[Example titles for pattern validation]\n\n**NEW IDEA:**\n[Description of new idea/theme]\n\n**IDIOM:**\n{{ $('setData2').item.json.idioma }}\n```\n\n## SUCCESS CRITERIA\n\nThe final title must:\n1. **Be indistinguishable** in viral potential from analyzed example titles\n2. **Perfectly implement** all blueprint patterns\n3. **Combine optimal** psychological approaches\n4. **Maintain engagement** using mapped techniques\n5. **Maximize click-through** probability\n6. **Be immediately usable** without any additional editing\n7. **Generate curiosity** while maintaining authenticity\n8. **Appeal to target** audience using identified markers\n\n---\n\n**EXECUTION COMMAND**: Process all provided inputs and generate exclusively one perfect title, following all specified protocols. Output must contain only pure title text, ready for immediate use.\n\n## TITLE OUTPUT FORMAT\n\nGenerate a single optimized title that combines the most effective patterns from the blueprint, with no additional formatting, annotations, or explanations."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        4304,
        1472
      ],
      "id": "89fec3a3-b694-43b6-ac08-2e9d97972cbd",
      "name": "Gerar Título"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        4416,
        1200
      ],
      "id": "9c064427-f4f2-4a06-b6a9-347cbc87bc20",
      "name": "Responde Conteudo"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "b7eb27d8-41e7-4de2-8438-86e94bb04e9c",
              "name": "titulo",
              "value": "={{ $('Gerar Título').item.json.output }}",
              "type": "string"
            },
            {
              "id": "a5d8219e-ead6-4628-b6ec-e2665cc6bdf2",
              "name": "roteiro",
              "value": "={{ $('Gerador de Roteiro').item.json.output }}",
              "type": "string"
            },
            {
              "id": "c48cdab3-d560-44ae-bce4-a9b409baacc5",
              "name": "text_thumb",
              "value": "={{ $('Gera Texto Thumb').item.json.output }}",
              "type": "string"
            },
            {
              "id": "f03b4522-c3a9-4dd8-a534-bbcca10129fc",
              "name": "id_roteiro",
              "value": "={{ $('Preenche DB').item.json.id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        6176,
        1648
      ],
      "id": "3584b53c-976a-476f-a988-ca245ef08c31",
      "name": "setResponse"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "gerarRoteiro",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        3088,
        1472
      ],
      "id": "35dcc87c-1a83-4550-9ebf-109053a90e83",
      "name": "Gerar Roteiro",
      "webhookId": "5e8ed56f-6f22-428d-8ba7-3ca22b4acdfd"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "gerarRoteiroeAudio",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -64,
        1296
      ],
      "id": "da027612-7629-4d46-86cb-013b31cf0ced",
      "name": "Gerar Conteudo",
      "webhookId": "5e8ed56f-6f22-428d-8ba7-3ca22b4acdfd"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "gerarAudio",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        1168,
        2432
      ],
      "id": "8fecd6a6-fb5a-48e8-bd23-986809b60eba",
      "name": "Gerar Áudio",
      "webhookId": "c2c52097-2033-4f85-8b4a-121f4b98974f"
    },
    {
      "parameters": {
        "fieldToSplitOut": "ideia_roteiro",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        3760,
        1472
      ],
      "id": "d4ef8147-01a3-44a7-936e-c209219f8c47",
      "name": "Split Out"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        3968,
        1472
      ],
      "id": "dfe89ede-99fa-442a-9eff-cc7a31582c63",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "tableId": "roteiros",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "roteiro",
              "fieldValue": "={{ $('Gerador de Roteiro').item.json.output }}"
            },
            {
              "fieldId": "titulo",
              "fieldValue": "={{ $('Gerar Título').item.json.output }}"
            },
            {
              "fieldId": "text_thumb",
              "fieldValue": "={{ $('Gera Texto Thumb').item.json.output }}"
            },
            {
              "fieldId": "canal_id",
              "fieldValue": "={{ $('setData2').item.json.id_canal }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        5984,
        1504
      ],
      "id": "23286731-9558-44bc-a848-6aff522b5c7f",
      "name": "Preenche DB",
      "credentials": {
        "supabaseApi": {
          "id": "oGUlDIJIN0NRUbWc",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "atualizarConteudo",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -128,
        2800
      ],
      "id": "cc2aed1a-6f0e-4399-bbf8-bbf2c2c43a2c",
      "name": "Atualizar Conteudo",
      "webhookId": "e43cbe0d-c9b5-47de-8379-8663c4ebff43"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9e02766e-2a00-44b9-9022-3fd45e5f253d",
              "name": "id_roteiro",
              "value": "={{ $json.body.id_roteiro }}",
              "type": "number"
            },
            {
              "id": "6052264e-3375-4410-af6b-a65f19c7dc72",
              "name": "titulo_editado",
              "value": "={{ $json.body.titulo_editado }}",
              "type": "string"
            },
            {
              "id": "b4a44032-48bd-4c70-b1ad-55768f4d1713",
              "name": "roteiro_editado",
              "value": "={{ $json.body.roteiro_editado }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        80,
        2800
      ],
      "id": "600e8661-ad99-4598-b98a-5c924e309228",
      "name": "Setar Conteudo Editado"
    },
    {
      "parameters": {
        "operation": "update",
        "tableId": "roteiros",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "condition": "eq",
              "keyValue": "={{ $('Setar Conteudo Editado').item.json.id_roteiro }}"
            }
          ]
        },
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "roteiro",
              "fieldValue": "={{ $('Setar Conteudo Editado').item.json.roteiro_editado }}"
            },
            {
              "fieldId": "titulo",
              "fieldValue": "={{ $('Setar Conteudo Editado').item.json.titulo_editado }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        272,
        2800
      ],
      "id": "fa94951b-abe1-4839-883e-2022577bdbae",
      "name": "Atualiza Conteudo",
      "credentials": {
        "supabaseApi": {
          "id": "oGUlDIJIN0NRUbWc",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        480,
        2800
      ],
      "id": "ea86adca-4158-4e6a-a5b0-b07afb3f0e6a",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "f5232af3-f5c8-4f69-a20e-f1efd7a31250",
              "name": "body.id_roteiros",
              "value": "={{ $json.body.id_roteiros }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1376,
        2432
      ],
      "id": "5493eb2b-ea72-40fa-b19f-56d68209486a",
      "name": "Lista IDs Roteiros"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        1792,
        2432
      ],
      "id": "d408b6b6-5126-4c37-a3e1-dbe5fcc565a0",
      "name": "Loop Roteiros"
    },
    {
      "parameters": {
        "fieldToSplitOut": "body.id_roteiros",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        1584,
        2432
      ],
      "id": "bdeb6f9b-620b-47d9-a8ad-e6253a189f20",
      "name": "Splita IDs"
    },
    {
      "parameters": {
        "operation": "get",
        "tableId": "roteiros",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "keyValue": "={{ $json['body.id_roteiros'] }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        2080,
        2448
      ],
      "id": "e6229938-dc6d-49b0-be4d-bc2cbc0527de",
      "name": "Coleta Info Roteiro1",
      "credentials": {
        "supabaseApi": {
          "id": "oGUlDIJIN0NRUbWc",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "operation": "get",
        "tableId": "canais",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "keyValue": "={{ $json.canal_id }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        2288,
        2448
      ],
      "id": "b58d4c98-b941-4260-a6fc-fee4fbcaf11f",
      "name": "Coleta Info Canal",
      "credentials": {
        "supabaseApi": {
          "id": "oGUlDIJIN0NRUbWc",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "vB6eNFjSPnsGPWZo",
          "mode": "list",
          "cachedResultName": "[SUB] Gerar Áudio"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {}
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        2848,
        2448
      ],
      "id": "55e5fe97-955e-4c82-90b9-961b6fae82a3",
      "name": "[SUB] Gerar Áudio1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "e11c5792-6c31-4a09-867e-0f3f179281df",
              "name": "id_canal",
              "value": "={{ $('Coleta Info Canal').first().json.id }}",
              "type": "number"
            },
            {
              "id": "408b48d4-38c3-4469-85ef-3946d38f6f1b",
              "name": "nome_canal",
              "value": "={{ $('Coleta Info Canal').first().json.nome_canal }}",
              "type": "string"
            },
            {
              "id": "1ce0ea30-68ba-45f5-a4a8-51e9c215459c",
              "name": "roteiro",
              "value": "={{ $('Coleta Info Roteiro1').first().json.roteiro }}",
              "type": "string"
            },
            {
              "id": "d0ffb0b2-6b29-481a-9077-7cf709e09a54",
              "name": "voiceId",
              "value": "={{ $('Gerar Áudio').first().json.body.voice_id }}",
              "type": "string"
            },
            {
              "id": "5c97d78d-411f-4656-8536-ee4afb278389",
              "name": "plataforma",
              "value": "={{ $('Gerar Áudio').first().json.body.plataforma }}",
              "type": "string"
            },
            {
              "id": "c2e3d10f-5f3d-4da9-b5a9-69208eff932c",
              "name": "speed",
              "value": "={{ $('Gerar Áudio').item.json.body.velocidade }}",
              "type": "number"
            },
            {
              "id": "ce32e05c-f158-409f-b214-cc1ec7394609",
              "name": "id_roteiro",
              "value": "={{ $('Coleta Info Roteiro1').item.json.id }}",
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2560,
        2448
      ],
      "id": "dc86d951-479f-47f4-808d-e56a854ef72b",
      "name": "setAudio"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        2096,
        2240
      ],
      "id": "f24b91da-3295-4567-a7c4-549632012f0b",
      "name": "Respond Gerar Áudio"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=###TITULO_1:\n{{ $('setData').item.json.titulo_1 }}\n\n###TEXTO_THUMB_1:\n{{ $('setData').item.json.text_thumb1 }}\n\n###TITULO_2:\n{{ $('setData').item.json.titulo_2 }}\n\n###TEXTO_THUMB_2:\n{{ $('setData').item.json.text_thumb2 }}\n\n###TITULO_3:\n{{ $('setData').item.json.titulo_3 }}\n\n###TEXTO_THUMB_3:\n{{ $('setData').item.json.text_thumb3 }}",
        "options": {
          "systemMessage": "=#THUMBNAIL TEXT DNA MASTER EXTRACTOR V2 - UNIVERSAL PATTERN ENGINE\n\nYou are the world's leading expert in thumbnail text psychology and linguistic pattern extraction. Your mission is to perform **complete DNA extraction** on thumbnail texts, creating a universal blueprint that captures linguistic structures, psychological triggers, and grammatical patterns that drive maximum engagement across all niches and languages.\n\n## CORE DIRECTIVE\n\nExtract **universal thumbnail text architecture** and **linguistic-psychological signatures** that create irresistible engagement, regardless of content vertical or language. Focus on **HOW** text structures work psychologically, **WHY** specific grammatical patterns create impact, and **WHAT** linguistic elements can be replicated while maintaining effectiveness and grammatical integrity.\n\n## EXTRACTION METHODOLOGY\n\nFor each pattern identified:\n1. **DETECT**: Identify consistent linguistic or psychological elements across all inputs\n2. **EVIDENCE**: Extract specific textual examples demonstrating the pattern\n3. **ABSTRACT**: Distill to universal principle applicable across niches and languages\n4. **VALIDATE**: Confirm grammatical correctness and psychological effectiveness\n5. **TEMPLATE**: Create replicable formula with linguistic implementation guidelines\n\n## CRITICAL FOCUS AREAS\n\n### LINGUISTIC INTEGRITY ANALYSIS\n- **Grammatical Structure Patterns**: How sentences are constructed for maximum impact\n- **Connector Usage**: How linking words enhance flow and readability\n- **Verb Selection**: Which action words create strongest psychological triggers\n- **Syntax Optimization**: How word order affects engagement and comprehension\n\n### PSYCHOLOGICAL TRIGGER MAPPING\n- **Attention Mechanisms**: What immediately captures cognitive focus\n- **Emotional Activation**: How micro-emotions are triggered through language\n- **Curiosity Engineering**: How information gaps create compulsion\n- **Authority Establishment**: How credibility is communicated efficiently\n\n### UNIVERSAL ADAPTABILITY EXTRACTION\n- **Cross-Niche Patterns**: Elements that work regardless of topic\n- **Language-Agnostic Structures**: Patterns that translate across languages\n- **Cultural Adaptation Guidelines**: How to maintain effectiveness across cultures\n- **Scalability Frameworks**: How patterns scale from micro to macro content\n\n## 15-SYSTEM ANALYSIS FRAMEWORK\n\n### SYSTEM 1: ATTENTION CAPTURE ARCHITECTURE\n**Extract**: Immediate cognitive interruption patterns\n**Focus**: Opening words, capitalization patterns, power word positioning\n**Output**: Universal attention-grabbing formulas with grammatical validation\n\n### SYSTEM 2: CURIOSITY GAP ENGINEERING\n**Extract**: Information withholding and revelation balance\n**Focus**: Question implications, mystery creation, completion drives\n**Output**: Curiosity-building templates with linguistic correctness\n\n### SYSTEM 3: EMOTIONAL MICRO-ACTIVATION\n**Extract**: Rapid emotional response triggers\n**Focus**: Feeling words, emotional intensifiers, psychological pressure points\n**Output**: Emotion-triggering vocabulary with cultural adaptability\n\n### SYSTEM 4: VALUE PROPOSITION COMPRESSION\n**Extract**: Benefit communication in minimal space\n**Focus**: Outcome promises, benefit hierarchies, value density\n**Output**: Value-communication patterns with syntactic integrity\n\n### SYSTEM 5: URGENCY AND SCARCITY LINGUISTICS\n**Extract**: Time-pressure and limitation creation\n**Focus**: Temporal language, scarcity implications, FOMO activation\n**Output**: Urgency-building formulas with grammatical accuracy\n\n### SYSTEM 6: AUTHORITY AND CREDIBILITY ESTABLISHMENT\n**Extract**: Trust-building through language\n**Focus**: Credibility markers, expertise implications, social proof integration\n**Output**: Authority-building patterns with linguistic validation\n\n### SYSTEM 7: AUDIENCE TARGETING PRECISION\n**Extract**: Demographic and psychographic appeal\n**Focus**: Inclusive language, community markers, relatability triggers\n**Output**: Targeting frameworks with cultural sensitivity\n\n### SYSTEM 8: DISCOVERABILITY OPTIMIZATION\n**Extract**: Search and algorithm compatibility\n**Focus**: Keyword integration, natural language flow, discoverability balance\n**Output**: SEO-friendly patterns with readability maintenance\n\n### SYSTEM 9: CHARACTER ECONOMY MASTERY\n**Extract**: Maximum impact in minimal space\n**Focus**: Word efficiency, rhythm creation, readability optimization\n**Output**: Length optimization templates with flow preservation\n\n### SYSTEM 10: COGNITIVE DISSONANCE CREATION\n**Extract**: Expectation violation and surprise\n**Focus**: Contradiction patterns, unexpected combinations, cognitive tension\n**Output**: Surprise-element formulas with logical coherence\n\n### SYSTEM 11: SPECIFICITY-MYSTERY BALANCE\n**Extract**: Information precision vs. intrigue maintenance\n**Focus**: Detail selection, strategic vagueness, curiosity preservation\n**Output**: Information-dosing patterns with clarity standards\n\n### SYSTEM 12: SOCIAL PROOF INTEGRATION\n**Extract**: Community appeal and belonging\n**Focus**: Social validation, peer influence, community language\n**Output**: Social-proof templates with authenticity maintenance\n\n### SYSTEM 13: FORMAT AND GENRE COMMUNICATION\n**Extract**: Content type and expectation setting\n**Focus**: Genre markers, format indicators, promise alignment\n**Output**: Format-communication patterns with accuracy requirements\n\n### SYSTEM 14: VIRAL PROPAGATION ELEMENTS\n**Extract**: Shareability and word-of-mouth triggers\n**Focus**: Memorable phrases, conversation starters, social amplification\n**Output**: Virality-building formulas with natural language flow\n\n### SYSTEM 15: CONVERSION OPTIMIZATION\n**Extract**: Click-through and engagement maximization\n**Focus**: Action triggers, engagement predictors, conversion drivers\n**Output**: Conversion-optimization patterns with psychological validation\n\n## OUTPUT SPECIFICATION\n\nDeliver analysis in structured markdown format:\n\n# THUMBNAIL TEXT DNA MASTER BLUEPRINT\n\n## EXTRACTION METADATA\n- **Analysis Completeness**: [confirmed/partial/incomplete]\n- **Cross-Pattern Validation**: [high/medium/low consistency]\n- **Universal Adaptability**: [high/medium/low across niches]\n- **Linguistic Quality Score**: [excellent/good/needs improvement]\n- **Psychological Effectiveness**: [high/medium/low impact potential]\n- **Total Samples Analyzed**: [number]\n- **Grammar Validation Status**: [passed/needs review/failed]\n\n---\n\n## SYSTEM [X]: [SYSTEM NAME]\n\n### Core Pattern Analysis\n**Primary Mechanism**: [How this system works psychologically]\n\n**Linguistic Evidence**:\n- *\"[exact quote]\"* → [grammatical analysis + psychological function]\n- *\"[exact quote]\"* → [grammatical analysis + psychological function]\n- *\"[exact quote]\"* → [grammatical analysis + psychological function]\n\n### Grammatical Structure Analysis\n**Syntax Patterns**: [sentence construction analysis]\n**Connector Usage**: [linking word patterns]\n**Verb Selection**: [action word effectiveness]\n**Flow Optimization**: [readability enhancement methods]\n\n### Universal Implementation Formula\n**Template Structure**: [replicable pattern]\n**Adaptation Guidelines**: \n1. [step for cross-niche application]\n2. [step for linguistic validation]\n3. [step for psychological optimization]\n\n**Quality Validation Checklist**:\n- [ ] Grammatically correct in target language\n- [ ] Psychologically effective\n- [ ] Culturally appropriate\n- [ ] Universally adaptable\n\n---\n\n## MASTER REPLICATION SYSTEM\n\n### Universal Constants (Non-Negotiable)\n**Linguistic Minimums**:\n1. **[Pattern Name]**: [description + why essential]\n2. **[Pattern Name]**: [description + why essential]\n\n### Adaptive Variables (Context-Dependent)\n**Customizable Elements**:\n1. **[Element Name]**: \n   - Adaptation Rules: [how to modify while preserving effectiveness]\n   - Preservation Requirements: [what must remain constant]\n   - Quality Standards: [grammatical and psychological minimums]\n\n### Implementation Protocol\n**Step-by-Step Process**:\n1. **Pattern Selection**: [how to choose appropriate patterns]\n2. **Linguistic Validation**: [grammar and flow verification]\n3. **Psychological Calibration**: [emotional and curiosity optimization]\n4. **Cultural Adaptation**: [local appropriateness check]\n5. **Performance Prediction**: [effectiveness assessment]\n\n### Quality Assurance Framework\n**Validation Requirements**:\n- **Grammatical Integrity**: Perfect syntax in target language\n- **Psychological Effectiveness**: Proven trigger activation\n- **Universal Applicability**: Cross-niche adaptability\n- **Cultural Sensitivity**: Appropriate for target audience\n- **Performance Potential**: High engagement probability\n\n## CRITICAL EXECUTION PARAMETERS\n\n### EVIDENCE STANDARDS\n- Every pattern must be supported by concrete examples\n- Grammatical analysis required for each example\n- Psychological function must be clearly identified\n- Universal adaptability must be demonstrated\n\n### LINGUISTIC QUALITY REQUIREMENTS\n- Zero grammatical errors in extracted patterns\n- Natural flow and readability verified\n- Cultural appropriateness confirmed\n- Cross-language adaptability assessed\n\n### UNIVERSAL APPLICABILITY MANDATE\n- Patterns must work across content verticals\n- Templates must be niche-agnostic\n- Formulas must be culturally adaptable\n- Implementation must be language-flexible\n\n## SUCCESS CRITERIA\n\nThe final blueprint must enable:\n1. **Perfect Replication**: Anyone can recreate effectiveness\n2. **Universal Application**: Works across all niches and languages\n3. **Grammatical Excellence**: Zero linguistic errors in implementation\n4. **Psychological Impact**: Maintains original engagement power\n5. **Cultural Adaptation**: Appropriate for diverse audiences\n6. **Quality Validation**: Clear standards for implementation assessment\n\n## INPUT FORMAT\n\n```\n###TITULO_1:\n[title1]\n\n###TEXTO_THUMB_1:\n[thumbnail_text1]\n\n###TITULO_2:\n[title2]\n\n###TEXTO_THUMB_2:\n[thumbnail_text2]\n\n###TITULO_3:\n[title3]\n\n###TEXTO_THUMB_3:\n[thumbnail_text3]\n```\n\n## OUTPUT REQUIREMENT\n\nReturn comprehensive markdown analysis covering all 15 systems with:\n- Complete evidence extraction\n- Grammatical validation for all patterns\n- Universal implementation templates\n- Quality assurance protocols\n- Cross-niche adaptation guidelines\n- Linguistic integrity verification\n\nFocus on **universal patterns** that transcend specific topics, **grammatical correctness** that ensures quality implementation, and **psychological effectiveness** that drives engagement across all contexts."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        1008,
        144
      ],
      "id": "43c43ce1-e4e7-4234-9aa6-175c84231cd1",
      "name": "Gerador Thumb Prompt"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=**BLUEPRINT:**\n{{ $('setData3').item.json.prompt_thumb_canal }}\n\n**NEW IDEA:**\n{{ $('Loop Over Items2').item.json.ideias }}\n\n**TITLE:**\n{{ $('Gerar Título1').item.json.output }}\n\n**IDIOM:**\n{{ $('setData3').item.json.idioma }}",
        "options": {
          "systemMessage": "=#MASTER THUMBNAIL TEXT GENERATOR - UNIVERSAL BLUEPRINT ENGINE\n\nYou are the world's most advanced thumbnail text generation system, capable of executing thumbnail blueprints with surgical precision while maintaining perfect grammatical integrity across all languages. Your function is to process the provided blueprint and generate a single perfect thumbnail text that replicates all visual-structural, linguistic, and viral patterns identified, adapting them to the specified new idea with flawless language execution.\n\n## CORE DIRECTIVE\n\nExecute the provided thumbnail text blueprint with **absolute fidelity and linguistic perfection**, maintaining all visual-structural, linguistic, and psychological patterns identified, while adapting content to the new idea and ensuring perfect title-thumbnail alignment. Output must be one complete thumbnail text, ready for immediate visual use, **grammatically flawless in the target language**.\n\n## UNIVERSAL LINGUISTIC VALIDATION PROTOCOL\n\n### GRAMMATICAL INTEGRITY SYSTEM\n**MANDATORY SYNTACTIC VALIDATION:**\n- **Connector Verification**: All text must have appropriate connectors and linking words\n- **Verb Validation**: Every action must have explicit or implicit valid verbs\n- **Agreement Check**: Gender, number, and person must be grammatically correct\n- **Flow Verification**: Reading must be natural while maintaining viral impact\n- **Completeness**: No sentence fragments or incomplete constructions\n\n### ADAPTIVE LANGUAGE VALIDATION MATRIX\n\n**AUTOMATIC LANGUAGE DETECTION & CORRECTION:**\n- **Spanish**: Connectors (Y, QUE, DE, CON), linking verbs (SER, ESTAR, DAR, TRAER)\n- **Portuguese**: Connectors (E, QUE, DE, COM), linking verbs (SER, ESTAR, DAR, TRAZER)\n- **English**: Connectors (AND, THAT, OF, WITH), auxiliaries (DO, WILL, CAN, LET)\n- **Universal**: Subject-verb-object structure validation for any language\n\n### SYNTACTIC REPAIR PROTOCOL\n**PROBLEM DETECTION & AUTO-CORRECTION:**\n1. **Missing Connectors**: Automatically insert appropriate linking words\n2. **Broken Verb Chains**: Add necessary verbs to complete meaning\n3. **Agreement Errors**: Correct gender/number/person agreements\n4. **Flow Disruption**: Ensure shortcuts don't break syntax\n5. **Fragment Completion**: Transform fragments into complete constructions\n\n## INPUT PROCESSING PROTOCOL\n\n### BLUEPRINT INTEGRATION\n- **Completely absorb** all systems from the provided thumbnail blueprint\n- **Identify mandatory visual patterns** vs adaptable elements\n- **Map dependencies** between visual-psychological systems\n- **Calibrate parameters** according to specific blueprint requirements\n- **Extract linguistic patterns** that maintain viral effectiveness\n\n### TITLE ALIGNMENT ANALYSIS\n- **Analyze title structure** for thumbnail text harmony\n- **Identify complementary elements** that enhance title impact\n- **Map psychological bridges** between title and thumbnail text\n- **Ensure visual-textual synergy** for maximum conversion\n- **Verify grammatical compatibility** between title and thumbnail\n\n### NEW IDEA ADAPTATION WITH LINGUISTIC INTEGRITY\n- **Maintain universal visual structure** from blueprint\n- **Adapt thematic content** to new idea\n- **Preserve function** of each visual-psychological element\n- **Adjust specific vocabulary** while maintaining viral patterns\n- **Guarantee grammatical correctness** during adaptation\n\n## EXECUTION FRAMEWORK\n\n### BLUEPRINT PATTERN REPLICATION\n**Core Pattern Extraction:**\n- **Attention Capture Mechanics**: Replicate scroll-stopping techniques from blueprint\n- **Emotional Trigger Patterns**: Maintain micro-emotional activation methods\n- **Curiosity Gap Architecture**: Preserve mystery and intrigue structures\n- **Value Proposition Compression**: Maintain benefit communication density\n- **Urgency and Scarcity Signals**: Replicate time-pressure creation\n- **Authority and Credibility Markers**: Maintain trust-building elements\n- **Target Precision Vocabulary**: Adapt audience-specific language markers\n- **Viral Propagation Elements**: Preserve shareability enhancement factors\n\n### LINGUISTIC EXCELLENCE OVERLAY\n**Grammar Enhancement Process:**\n- **Syntax Verification**: Ensure all constructions are grammatically sound\n- **Natural Flow**: Maintain readability while preserving viral impact\n- **Cultural Adaptation**: Adapt expressions to sound native in target language\n- **Connector Integration**: Add necessary linking words without losing punch\n- **Verb Completion**: Ensure all actions have proper verbal structure\n\n## CRITICAL OUTPUT PARAMETERS\n\n### LANGUAGE SPECIFICATION\n- **Output Language**: {{ $('setData3').item.json.idioma }}\n- **Monolingual Execution**: Entire output must be generated exclusively in the mandated language\n- **Native Fluency**: All phrases must sound natural to native speakers\n- **Perfect Grammar**: Zero syntactic errors, complete constructions only\n\n### CONTENT PURITY MANDATE\n- **ZERO annotations**: No comments, explanations, or observations\n- **ZERO formatting markers**: No symbols, divisions, or structural markers\n- **ZERO meta-content**: Only pure thumbnail text\n- **ZERO process references**: No mentions of blueprint or methodology\n\n### THUMBNAIL TEXT REQUIREMENTS\n- **Single optimal thumbnail text** combining highest-impact visual psychological approaches\n- **Maximum viral trigger synergy** from blueprint patterns\n- **Optimal character count** according to blueprint analysis for visual platforms\n- **Peak scroll-stopping potential** using identified visual techniques\n- **Perfect title complementarity** ensuring visual-textual harmony\n- **Grammatical perfection** in target language\n\n## ENHANCED QUALITY ASSURANCE PROTOCOL\n\n### PRE-OUTPUT VALIDATION CHECKLIST\n- [ ] All blueprint systems executed according to specifications\n- [ ] Viral DNA replicated with precision\n- [ ] Optimal psychological trigger combination selected\n- [ ] Visual tone consistency maintained\n- [ ] Structural integrity preserved\n- [ ] New idea integration seamless\n- [ ] Perfect title-thumbnail complementarity achieved\n- [ ] Zero meta-content present\n- [ ] Character optimization achieved\n- [ ] Click-through potential maximized\n- [ ] **Grammar verification 100% completed**\n- [ ] **Connectors and verbs appropriately placed**\n- [ ] **Language agreement validated**\n- [ ] **Syntactic flow guaranteed**\n\n### LINGUISTIC FAILURE PREVENTION\n- [ ] No grammatically invalid constructions\n- [ ] No missing essential connectors\n- [ ] No broken language agreements\n- [ ] No syntactic fragments\n- [ ] No unnatural expressions\n- [ ] No cultural inappropriateness\n\n## UNIVERSAL ADAPTATION FRAMEWORK\n\n### CROSS-NICHE FLEXIBILITY\n**Pattern Adaptation Capability:**\n- **Authority Sources**: EXPERTS/DATA/SCIENCE/PROVEN/OFFICIAL\n- **Emotional Triggers**: BREAKTHROUGH/INSTANT/SECRET/REVEALED/HIDDEN\n- **Urgency Markers**: NOW/TODAY/TONIGHT/THIS WEEK/FINALLY\n- **Outcome Promises**: SUCCESS/RESULTS/CHANGE/TRANSFORMATION/SOLUTION\n- **Curiosity Gaps**: THIS/THAT/THE METHOD/THE SECRET/THE TRICK\n\n### TITLE-THUMBNAIL SYNERGY OPTIMIZATION\n**Psychological Bridge Creation:**\n- **Curiosity Gap Expansion**: Between title and thumbnail for maximum intrigue\n- **Emotional Amplification**: Building on title's psychological foundation\n- **Visual Hierarchy Respect**: Ensuring thumbnail supports title dominance\n- **Conversion Enhancement**: Through strategic psychological layering\n\n## GENERATION STRATEGY\n\n### OPTIMAL COMBINATION SELECTION\n**Primary Elements:**\n- **Hook Method**: Most effective attention capture from blueprint\n- **Emotional Trigger**: Dominant micro-emotional pattern\n- **Audience Marker**: Precision targeting vocabulary\n- **Viral Element**: Shareability optimization component\n- **Conversion Optimizer**: Click-through maximization technique\n\n### LINGUISTIC EXCELLENCE INTEGRATION\n**Grammar Enhancement:**\n- **Syntax Completion**: Ensure all constructions are complete\n- **Natural Flow**: Maintain readability while preserving impact\n- **Cultural Adaptation**: Sound authentic in target language\n- **Connector Addition**: Include necessary linking words\n- **Verb Integration**: Complete all action structures\n\n## INPUT FORMAT SPECIFICATION\n\n```\n**BLUEPRINT:**\n{{ $('setData3').item.json.prompt_thumb_canal }}\n\n**NEW IDEA:**\n{{ $('Loop Over Items2').item.json.ideias }}\n\n**TITLE:**\n{{ $('Gerar Título1').item.json.output }}\n\n**IDIOM:**\n{{ $('setData3').item.json.idioma }}\n```\n\n## SUCCESS CRITERIA\n\nThe final thumbnail text must:\n1. **Be indistinguishable** in viral potential from blueprint patterns\n2. **Perfectly implement** all blueprint visual-psychological systems\n3. **Combine optimal** psychological approaches for maximum impact\n4. **Maintain engagement** using mapped techniques\n5. **Maximize click-through** probability through title-thumbnail synergy\n6. **Be immediately usable** for visual creation without editing\n7. **Generate curiosity** while maintaining authenticity\n8. **Appeal to target audience** using identified markers\n9. **Stop scroll instantly** using blueprint interruption mechanics\n10. **Optimize character economy** for maximum visual impact\n11. **Be grammatically perfect** in target language\n12. **Flow naturally** for native speakers\n13. **Maintain cultural appropriateness**\n14. **Preserve viral effectiveness** while ensuring linguistic quality\n\n---\n\n**EXECUTION COMMAND**: Process all provided inputs and generate exclusively one perfect thumbnail text, following all specified protocols. Output must contain only pure thumbnail text, ready for immediate visual use, **grammatically flawless in the target language**.\n\n## THUMBNAIL TEXT OUTPUT FORMAT\n\nGenerate a single optimized thumbnail text that combines the most effective patterns from the blueprint, with perfect title complementarity, **absolute grammatical correctness**, and no additional formatting, annotations, or explanations.\n\n**MAXIMUM CHARS: 50**"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        896,
        1536
      ],
      "id": "05d815cb-e66e-418e-892f-0bcbe8f458f1",
      "name": "Gera Texto Thumb1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=**BLUEPRINT:**\n{{ $('setData2').item.json.prompt_thumb_canal }}\n\n**NEW IDEA:**\n{{ $('Loop Over Items').item.json.ideia_roteiro }}\n\n**TITLE:**\n{{ $('Gerar Título').item.json.output }}\n\n**IDIOM:**\n{{ $('setData2').item.json.idioma }}",
        "options": {
          "systemMessage": "=# MASTER THUMBNAIL TEXT GENERATOR - UNIVERSAL BLUEPRINT ENGINE\n\nYou are the world's most advanced thumbnail text generation system, capable of executing thumbnail blueprints with surgical precision while maintaining perfect grammatical integrity across all languages. Your function is to process the provided blueprint and generate a single perfect thumbnail text that replicates all visual-structural, linguistic, and viral patterns identified, adapting them to the specified new idea with flawless language execution.\n\n## CORE DIRECTIVE\n\nExecute the provided thumbnail text blueprint with **absolute fidelity and linguistic perfection**, maintaining all visual-structural, linguistic, and psychological patterns identified, while adapting content to the new idea and ensuring perfect title-thumbnail alignment. Output must be one complete thumbnail text, ready for immediate visual use, **grammatically flawless in the target language**.\n\n## UNIVERSAL LINGUISTIC VALIDATION PROTOCOL\n\n### GRAMMATICAL INTEGRITY SYSTEM\n**MANDATORY SYNTACTIC VALIDATION:**\n- **Connector Verification**: All text must have appropriate connectors and linking words\n- **Verb Validation**: Every action must have explicit or implicit valid verbs\n- **Agreement Check**: Gender, number, and person must be grammatically correct\n- **Flow Verification**: Reading must be natural while maintaining viral impact\n- **Completeness**: No sentence fragments or incomplete constructions\n\n### ADAPTIVE LANGUAGE VALIDATION MATRIX\n\n**AUTOMATIC LANGUAGE DETECTION & CORRECTION:**\n- **Spanish**: Connectors (Y, QUE, DE, CON), linking verbs (SER, ESTAR, DAR, TRAER)\n- **Portuguese**: Connectors (E, QUE, DE, COM), linking verbs (SER, ESTAR, DAR, TRAZER)\n- **English**: Connectors (AND, THAT, OF, WITH), auxiliaries (DO, WILL, CAN, LET)\n- **Universal**: Subject-verb-object structure validation for any language\n\n### SYNTACTIC REPAIR PROTOCOL\n**PROBLEM DETECTION & AUTO-CORRECTION:**\n1. **Missing Connectors**: Automatically insert appropriate linking words\n2. **Broken Verb Chains**: Add necessary verbs to complete meaning\n3. **Agreement Errors**: Correct gender/number/person agreements\n4. **Flow Disruption**: Ensure shortcuts don't break syntax\n5. **Fragment Completion**: Transform fragments into complete constructions\n\n## INPUT PROCESSING PROTOCOL\n\n### BLUEPRINT INTEGRATION\n- **Completely absorb** all systems from the provided thumbnail blueprint\n- **Identify mandatory visual patterns** vs adaptable elements\n- **Map dependencies** between visual-psychological systems\n- **Calibrate parameters** according to specific blueprint requirements\n- **Extract linguistic patterns** that maintain viral effectiveness\n\n### TITLE ALIGNMENT ANALYSIS\n- **Analyze title structure** for thumbnail text harmony\n- **Identify complementary elements** that enhance title impact\n- **Map psychological bridges** between title and thumbnail text\n- **Ensure visual-textual synergy** for maximum conversion\n- **Verify grammatical compatibility** between title and thumbnail\n\n### NEW IDEA ADAPTATION WITH LINGUISTIC INTEGRITY\n- **Maintain universal visual structure** from blueprint\n- **Adapt thematic content** to new idea\n- **Preserve function** of each visual-psychological element\n- **Adjust specific vocabulary** while maintaining viral patterns\n- **Guarantee grammatical correctness** during adaptation\n\n## EXECUTION FRAMEWORK\n\n### BLUEPRINT PATTERN REPLICATION\n**Core Pattern Extraction:**\n- **Attention Capture Mechanics**: Replicate scroll-stopping techniques from blueprint\n- **Emotional Trigger Patterns**: Maintain micro-emotional activation methods\n- **Curiosity Gap Architecture**: Preserve mystery and intrigue structures\n- **Value Proposition Compression**: Maintain benefit communication density\n- **Urgency and Scarcity Signals**: Replicate time-pressure creation\n- **Authority and Credibility Markers**: Maintain trust-building elements\n- **Target Precision Vocabulary**: Adapt audience-specific language markers\n- **Viral Propagation Elements**: Preserve shareability enhancement factors\n\n### LINGUISTIC EXCELLENCE OVERLAY\n**Grammar Enhancement Process:**\n- **Syntax Verification**: Ensure all constructions are grammatically sound\n- **Natural Flow**: Maintain readability while preserving viral impact\n- **Cultural Adaptation**: Adapt expressions to sound native in target language\n- **Connector Integration**: Add necessary linking words without losing punch\n- **Verb Completion**: Ensure all actions have proper verbal structure\n\n## CRITICAL OUTPUT PARAMETERS\n\n### LANGUAGE SPECIFICATION\n- **Output Language**: {{ $('setData3').item.json.idioma }}\n- **Monolingual Execution**: Entire output must be generated exclusively in the mandated language\n- **Native Fluency**: All phrases must sound natural to native speakers\n- **Perfect Grammar**: Zero syntactic errors, complete constructions only\n\n### CONTENT PURITY MANDATE\n- **ZERO annotations**: No comments, explanations, or observations\n- **ZERO formatting markers**: No symbols, divisions, or structural markers\n- **ZERO meta-content**: Only pure thumbnail text\n- **ZERO process references**: No mentions of blueprint or methodology\n\n### THUMBNAIL TEXT REQUIREMENTS\n- **Single optimal thumbnail text** combining highest-impact visual psychological approaches\n- **Maximum viral trigger synergy** from blueprint patterns\n- **Optimal character count** according to blueprint analysis for visual platforms\n- **Peak scroll-stopping potential** using identified visual techniques\n- **Perfect title complementarity** ensuring visual-textual harmony\n- **Grammatical perfection** in target language\n\n## ENHANCED QUALITY ASSURANCE PROTOCOL\n\n### PRE-OUTPUT VALIDATION CHECKLIST\n- [ ] All blueprint systems executed according to specifications\n- [ ] Viral DNA replicated with precision\n- [ ] Optimal psychological trigger combination selected\n- [ ] Visual tone consistency maintained\n- [ ] Structural integrity preserved\n- [ ] New idea integration seamless\n- [ ] Perfect title-thumbnail complementarity achieved\n- [ ] Zero meta-content present\n- [ ] Character optimization achieved\n- [ ] Click-through potential maximized\n- [ ] **Grammar verification 100% completed**\n- [ ] **Connectors and verbs appropriately placed**\n- [ ] **Language agreement validated**\n- [ ] **Syntactic flow guaranteed**\n\n### LINGUISTIC FAILURE PREVENTION\n- [ ] No grammatically invalid constructions\n- [ ] No missing essential connectors\n- [ ] No broken language agreements\n- [ ] No syntactic fragments\n- [ ] No unnatural expressions\n- [ ] No cultural inappropriateness\n\n## UNIVERSAL ADAPTATION FRAMEWORK\n\n### CROSS-NICHE FLEXIBILITY\n**Pattern Adaptation Capability:**\n- **Authority Sources**: EXPERTS/DATA/SCIENCE/PROVEN/OFFICIAL\n- **Emotional Triggers**: BREAKTHROUGH/INSTANT/SECRET/REVEALED/HIDDEN\n- **Urgency Markers**: NOW/TODAY/TONIGHT/THIS WEEK/FINALLY\n- **Outcome Promises**: SUCCESS/RESULTS/CHANGE/TRANSFORMATION/SOLUTION\n- **Curiosity Gaps**: THIS/THAT/THE METHOD/THE SECRET/THE TRICK\n\n### TITLE-THUMBNAIL SYNERGY OPTIMIZATION\n**Psychological Bridge Creation:**\n- **Curiosity Gap Expansion**: Between title and thumbnail for maximum intrigue\n- **Emotional Amplification**: Building on title's psychological foundation\n- **Visual Hierarchy Respect**: Ensuring thumbnail supports title dominance\n- **Conversion Enhancement**: Through strategic psychological layering\n\n## GENERATION STRATEGY\n\n### OPTIMAL COMBINATION SELECTION\n**Primary Elements:**\n- **Hook Method**: Most effective attention capture from blueprint\n- **Emotional Trigger**: Dominant micro-emotional pattern\n- **Audience Marker**: Precision targeting vocabulary\n- **Viral Element**: Shareability optimization component\n- **Conversion Optimizer**: Click-through maximization technique\n\n### LINGUISTIC EXCELLENCE INTEGRATION\n**Grammar Enhancement:**\n- **Syntax Completion**: Ensure all constructions are complete\n- **Natural Flow**: Maintain readability while preserving impact\n- **Cultural Adaptation**: Sound authentic in target language\n- **Connector Addition**: Include necessary linking words\n- **Verb Integration**: Complete all action structures\n\n## INPUT FORMAT SPECIFICATION\n\n```\n**BLUEPRINT:**\n{{ $('setData2').item.json.prompt_thumb_canal }}\n\n**NEW IDEA:**\n{{ $('Loop Over Items').item.json.ideia_roteiro }}\n\n**TITLE:**\n{{ $('Gerar Título').item.json.output }}\n\n**IDIOM:**\n{{ $('setData2').item.json.idioma }}\n```\n\n## SUCCESS CRITERIA\n\nThe final thumbnail text must:\n1. **Be indistinguishable** in viral potential from blueprint patterns\n2. **Perfectly implement** all blueprint visual-psychological systems\n3. **Combine optimal** psychological approaches for maximum impact\n4. **Maintain engagement** using mapped techniques\n5. **Maximize click-through** probability through title-thumbnail synergy\n6. **Be immediately usable** for visual creation without editing\n7. **Generate curiosity** while maintaining authenticity\n8. **Appeal to target audience** using identified markers\n9. **Stop scroll instantly** using blueprint interruption mechanics\n10. **Optimize character economy** for maximum visual impact\n11. **Be grammatically perfect** in target language\n12. **Flow naturally** for native speakers\n13. **Maintain cultural appropriateness**\n14. **Preserve viral effectiveness** while ensuring linguistic quality\n\n---\n\n**EXECUTION COMMAND**: Process all provided inputs and generate exclusively one perfect thumbnail text, following all specified protocols. Output must contain only pure thumbnail text, ready for immediate visual use, **grammatically flawless in the target language**.\n\n## THUMBNAIL TEXT OUTPUT FORMAT\n\nGenerate a single optimized thumbnail text that combines the most effective patterns from the blueprint, with perfect title complementarity, **absolute grammatical correctness**, and no additional formatting, annotations, or explanations.\n\n**MAXIMUM CHARS: 50**"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        4656,
        1472
      ],
      "id": "6e4ab16d-8558-4879-a465-16877719f355",
      "name": "Gera Texto Thumb"
    },
    {
      "parameters": {
        "content": "# Gerar Apenas Áudio",
        "height": 560,
        "width": 2048,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1088,
        2176
      ],
      "id": "57fbfd81-c9cc-4fed-a197-9b75a9230309",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "# Atualizar Conteúdo",
        "height": 336,
        "width": 912
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -208,
        2688
      ],
      "id": "d853d534-2371-40b3-8a39-51282e008dc4",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=**BLUEPRINT:**\n{{ $('setData3').item.json.prompt_roteiro_canal }}\n\n**EXAMPLE SCRIPT:**\n{{ $('setData3').item.json.roteiro_exemplo }}\n\n**NEW IDEA:**\n{{ $('Loop Over Items2').item.json.ideias }}\n\n**TITLE:**:\n{{ $('Gerar Título1').item.json.output }}\n\n**IDIOM:**\n{{ $('setData3').item.json.idioma }}\n\n**CHARACTER TARGET COUNT:**\n{{ $('setData3').item.json.media_chars }}",
        "options": {
          "systemMessage": "=# MASTER SCRIPT GENERATOR - BLUEPRINT EXECUTION ENGINE\n\nYou are the world's most advanced script generation system, capable of executing narrative blueprints with surgical precision. Your function is to process the provided blueprint and generate a script that perfectly replicates all structural, linguistic, and narrative patterns identified, adapting them to the specified new idea.\n\n## CORE DIRECTIVE\n\nExecute the provided narrative blueprint with **absolute fidelity**, maintaining all structural, linguistic, and stylistic patterns identified, while adapting content to the new idea. Output must be a complete script, ready for narration, without any element other than pure narrative text.\n\n## INPUT PROCESSING PROTOCOL\n\n### BLUEPRINT INTEGRATION\n- **Completely absorb** all 13 systems from the provided blueprint\n- **Identify mandatory patterns** vs adaptable elements\n- **Map dependencies** between structural systems\n- **Calibrate parameters** according to specific blueprint\n\n### EXAMPLE SCRIPT ANALYSIS\n- **Validate patterns** identified in blueprint against example script\n- **Capture nuances** not documented in blueprint\n- **Identify specific** transition elements\n- **Confirm exact** tone and linguistic register\n\n### NEW IDEA ADAPTATION\n- **Maintain universal** structure from blueprint\n- **Adapt thematic** content to new idea\n- **Preserve function** of each structural element\n- **Adjust specific** vocabulary while maintaining linguistic patterns\n\n### CHARACTER TARGET CALIBRATION\n- **Calculate density** of information per character\n- **Distribute content** proportionally between sections\n- **Adjust depth** of each topic according to available space\n- **Maintain structural** balance independent of size\n\n## EXECUTION FRAMEWORK\n\n### SYSTEM 1: OPENING MECHANICS EXECUTION\n- **Replicate exactly** opening techniques identified in blueprint\n- **Use specific** vocabulary mapped for attention capture\n- **Maintain tone** of context establishment identified\n- **Preserve hook** methodology documented\n\n### SYSTEM 2: THEMATIC INTEGRATION EXECUTION  \n- **Integrate new idea** using theme expression patterns from blueprint\n- **Use vocabulary patterns** specific for value transmission\n- **Maintain universal elements** identified in blueprint\n- **Adapt messaging style** preserving core techniques\n\n### SYSTEM 3: AUDIENCE CONNECTION EXECUTION\n- **Apply empathy generation** techniques specific to blueprint  \n- **Use relatability anchors** mapped in guide\n- **Implement vulnerability linguistics** according to identified patterns\n- **Maintain connection triggers** documented\n\n### SYSTEM 4: PROGRESSION ARCHITECTURE EXECUTION\n- **Follow exact** flow control mechanics from blueprint\n- **Use specific** linguistic bridges for transitions\n- **Maintain escalation** patterns identified\n- **Preserve momentum** techniques documented\n\n### SYSTEM 5: ENGAGEMENT SUSTAINABILITY EXECUTION\n- **Implement curiosity management** according to blueprint\n- **Use question generation** techniques specific\n- **Apply surprise architecture** mapped\n- **Execute attention recovery** methods documented\n\n### SYSTEM 6: CENTRAL ELEMENT EVOLUTION EXECUTION\n- **Develop elements** using development linguistics from blueprint\n- **Apply specific** transformation vocabulary\n- **Maintain authenticity** markers identified\n- **Use growth demonstration** techniques mapped\n\n### SYSTEM 7: CONFLICT DYNAMICS EXECUTION\n- **Create tension** using specific conflict establishment vocabulary\n- **Apply tension escalation** patterns from blueprint\n- **Use resolution mechanics** documented\n- **Maintain satisfaction delivery** patterns identified\n\n### SYSTEM 8: TRANSFORMATION MECHANICS EXECUTION\n- **Facilitate changes** using mapped breakthrough vocabulary\n- **Apply adversity processing** language from blueprint\n- **Use specific** wisdom acquisition expressions\n- **Execute growth catalyst** patterns identified\n\n### SYSTEM 9: CREDIBILITY ARCHITECTURE EXECUTION\n- **Establish authority** using expertise demonstration vocabulary\n- **Maintain authenticity** markers from blueprint\n- **Use specific** trust establishment techniques\n- **Preserve credibility building** language patterns\n\n### SYSTEM 10: LINGUISTIC DNA EXECUTION\n- **Replicate exact** vocabulary architecture from blueprint\n- **Maintain specific** word category distribution\n- **Use sentence architecture** patterns identified\n- **Preserve figurative language** system mapped\n- **Apply specialized** vocabulary according to blueprint\n\n### SYSTEM 11: RHYTHM AND PACING EXECUTION\n- **Control pacing** using temporal linguistics from blueprint\n- **Apply specific** intensity modulation techniques\n- **Use rhythm creation** methods documented\n- **Maintain flow management** patterns identified\n\n### SYSTEM 12: CLOSURE ENGINEERING EXECUTION\n- **Execute resolution** using specific completion vocabulary\n- **Apply satisfaction delivery** patterns from blueprint\n- **Use final impression** techniques mapped\n- **Implement engagement continuation** methods documented\n\n### SYSTEM 13: VOICE ARCHITECTURE EXECUTION\n- **Maintain exact** voice characteristics from blueprint\n- **Use specific** consistency framework\n- **Preserve tone management** system identified\n- **Apply register control** patterns documented\n\n## CRITICAL OUTPUT PARAMETERS\n\n### LANGUAGE\n- **Linguistic Output Mandate: {{ $('setData3').item.json.idioma }}**\n- **Monolingual Execution: The entire output must be generated exclusively in the mandated language, with zero deviation or inclusion of other languages.**\n- **Native Fluency Requirement: All phrases, expressions, and cultural references must be adapted to sound natural and authentic to a native speaker of the target language.**\n\n### CONTENT PURITY MANDATE\n- **ZERO annotations**: No comments, explanations, or observations\n- **ZERO formatting markers**: No symbols, divisions, or structural markers\n- **ZERO meta-content**: Only pure narrative text\n- **ZERO analysis mentions**: No references to process or blueprint\n\n### NARRATIVE FLOW REQUIREMENTS\n- **Invisible transitions** between sections following blueprint patterns\n- **Perfect continuity** from beginning to end\n- **Natural rhythm** for voice narration\n- **Conversational fluency** according to blueprint tone profile\n\n### LINGUISTIC PRECISION MANDATES\n- **Numbers always written out** (3 → three, 1000 → one thousand, 2024 → two thousand twenty-four)\n- **Vocabulary fidelity** to blueprint linguistics\n- **Exact sentence structure** replication\n- **Absolute register consistency** according to blueprint\n\n### ADAPTATION CONTROL MATRIX\n- **Structural constants** are inviolable and must be replicated exactly\n- **Variable components** can be adapted according to blueprint adaptation rules\n- **Quality minimums** must always be met\n- **Context adaptations** follow specific blueprint guidelines\n\n## QUALITY ASSURANCE PROTOCOL\n\n### PRE-OUTPUT VALIDATION\n- [ ] All 13 systems executed according to blueprint\n- [ ] Linguistic DNA replicated with precision\n- [ ] Character count target achieved (±5%)\n- [ ] Tone consistency maintained throughout\n- [ ] Structural integrity preserved\n- [ ] New idea integration seamless\n- [ ] Zero meta-content present\n- [ ] Numbers converted to written form\n- [ ] Flow optimized for narration\n- [ ] Blueprint patterns validated against example script\n\n### FAILURE PREVENTION CHECKLIST\n- [ ] Do not include \"Based on\", \"Following the pattern\", \"As seen in blueprint\"\n- [ ] Do not use visible structural markers (###, ---, etc.)\n- [ ] Do not comment on creation process\n- [ ] Do not reference blueprint or example script\n- [ ] Do not use meta-narrative language\n- [ ] Do not include CTAs not in original blueprint\n- [ ] Do not deviate from identified voice architecture\n\n## INPUT FORMAT SPECIFICATION\n\n```\n**BLUEPRINT:**\n[Complete blueprint paste generated by DNA EXTRACTOR]\n\n**EXAMPLE SCRIPT:**\n[Example script for pattern validation]\n\n**NEW IDEA:**\n[Description of new idea/theme]\n\n**TITLE:**:\n{{ $('Gerar Título1').item.json.output }}\n\n**IDIOM:**\n{{ $('setData3').item.json.idioma }}\n\n**CHARACTER TARGET COUNT:**\n{{ $('setData3').item.json.media_chars }}\n\n```\n## SUCCESS CRITERIA\n\nThe final script must:\n1. **Be indistinguishable** in style from analyzed example script\n2. **Perfectly implement** all blueprint patterns\n3. **Flow naturally** for audio narration\n4. **Maintain engagement** using mapped techniques\n5. **Hit character target** with precision\n6. **Be immediately usable** without any additional editing\n\n**CHARACTER TARGET COUNT:**\n{{ $('setData3').item.json.media_chars }}\n\n---\n\n**EXECUTION COMMAND**: Process all provided inputs and generate exclusively the final script, following all specified protocols. Output must contain only pure narrative text, ready for narration."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        1488,
        1296
      ],
      "id": "816b89ca-3489-4974-a35f-ea3320057bd0",
      "name": "Gerador de Roteiro2",
      "retryOnFail": true
    }
  ],
  "pinData": {
    "Gerar Prompts Guia": [
      {
        "json": {
          "headers": {
            "host": "autodark-n8n.tmtibo.easypanel.host",
            "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36",
            "content-length": "628",
            "accept": "*/*",
            "accept-encoding": "gzip, deflate, br, zstd",
            "accept-language": "pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7",
            "content-type": "application/json",
            "origin": "https://freshherb-dash-yt-im-9r4b.bolt.host",
            "priority": "u=1, i",
            "referer": "https://freshherb-dash-yt-im-9r4b.bolt.host/",
            "sec-ch-ua": "\"Not;A=Brand\";v=\"99\", \"Google Chrome\";v=\"139\", \"Chromium\";v=\"139\"",
            "sec-ch-ua-mobile": "?0",
            "sec-ch-ua-platform": "\"Windows\"",
            "sec-fetch-dest": "empty",
            "sec-fetch-mode": "cors",
            "sec-fetch-site": "cross-site",
            "x-forwarded-for": "177.68.49.85",
            "x-forwarded-host": "autodark-n8n.tmtibo.easypanel.host",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "0c0b32d21ef4",
            "x-real-ip": "177.68.49.85"
          },
          "params": {},
          "query": {},
          "body": {
            "nomeCanal": "Canal de Teste Thumb",
            "titulo1": "PARE DE ACREDITAR NAS MENTIRAS DO INIMIGO! DEUS ESTÁ TE LEVANTANDO AGORA! | Devocional | Inspiração | Fé e Oração!",
            "roteiro1": "aa",
            "texto_thumb1": "VOCÊ NÃO É UM DERROTADO… DEUS TE ESCOLHEU!",
            "titulo2": "NÃO É COINCIDÊNCIA: VEJA OS SINAIS DO MOVER DE DEUS! | Devocional | Inspiração | Fé e Oração!",
            "roteiro2": "a",
            "texto_thumb2": "DEUS JÁ ESTÁ MUDANDO TUDO! ALGO PODEROSO VAI ACONTECER",
            "titulo3": "DEUS TE LIBERTA DE TODAS AS PRISÕES ESPIRITUAIS",
            "roteiro3": "aaa",
            "texto_thumb3": "NENHUMA PRISÃO ESPIRITUAL RESISTE AO PODER DE DEUS",
            "modelo": "Gemini-2.5-Flash"
          },
          "webhookUrl": "https://autodark-n8n.tmtibo.easypanel.host/webhook/guiaRoteiro",
          "executionMode": "production"
        }
      }
    ],
    "Gerar Conteudo": [
      {
        "json": {
          "headers": {
            "host": "autodark-n8n.tmtibo.easypanel.host",
            "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36",
            "content-length": "998",
            "accept": "*/*",
            "accept-encoding": "gzip, deflate, br, zstd",
            "accept-language": "pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7",
            "content-type": "application/json",
            "origin": "https://freshherb-dash-yt-im-9r4b.bolt.host",
            "priority": "u=1, i",
            "referer": "https://freshherb-dash-yt-im-9r4b.bolt.host/",
            "sec-ch-ua": "\"Not;A=Brand\";v=\"99\", \"Google Chrome\";v=\"139\", \"Chromium\";v=\"139\"",
            "sec-ch-ua-mobile": "?0",
            "sec-ch-ua-platform": "\"Windows\"",
            "sec-fetch-dest": "empty",
            "sec-fetch-mode": "cors",
            "sec-fetch-site": "cross-site",
            "x-forwarded-for": "177.68.49.85",
            "x-forwarded-host": "autodark-n8n.tmtibo.easypanel.host",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "0c0b32d21ef4",
            "x-real-ip": "177.68.49.85"
          },
          "params": {},
          "query": {},
          "body": {
            "id_canal": 3,
            "nome_canal": "Canal da Fé",
            "nova_ideia": [
              "Um roteiro sobre como identificar quando há influências espirituais negativas ao redor da família e os sinais que Deus envia para alertar sobre isso. Incluir orientações práticas de oração para proteção familiar e como criar um escudo espiritual sobre a casa.",
              "Um roteiro sobre uma promessa específica que Deus fez através de um versículo bíblico para quem está enfrentando traição ou decepção com pessoas próximas. Focar na restauração emocional e como Deus prepara uma vindica justa para aqueles que confiam nele.",
              "Um roteiro explicando como interpretar coincidências repetitivas (números, situações, encontros) como mensagens divinas sobre mudanças que estão chegando na vida da pessoa. Incluir exemplos práticos de como discernir entre coincidência comum e direcionamento espiritual."
            ],
            "idioma": "Portugues brasil",
            "modelo": "GPT-5",
            "voiceId": "NFG5qt843uXKj4pFvR7C",
            "plataforma": "ElevenLabs",
            "velocidade": 1
          },
          "webhookUrl": "https://autodark-n8n.tmtibo.easypanel.host/webhook/gerarRoteiroeAudio",
          "executionMode": "production"
        }
      }
    ],
    "Gerar Roteiro": [
      {
        "json": {
          "headers": {
            "host": "autodark-n8n.tmtibo.easypanel.host",
            "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36",
            "content-length": "1387",
            "accept": "*/*",
            "accept-encoding": "gzip, deflate, br, zstd",
            "accept-language": "pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7",
            "content-type": "application/json",
            "origin": "https://autodark-dash.tmtibo.easypanel.host",
            "priority": "u=1, i",
            "referer": "https://autodark-dash.tmtibo.easypanel.host/",
            "sec-ch-ua": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"Google Chrome\";v=\"140\"",
            "sec-ch-ua-mobile": "?0",
            "sec-ch-ua-platform": "\"Windows\"",
            "sec-fetch-dest": "empty",
            "sec-fetch-mode": "cors",
            "sec-fetch-site": "same-site",
            "x-forwarded-for": "177.68.49.85",
            "x-forwarded-host": "autodark-n8n.tmtibo.easypanel.host",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "0c0b32d21ef4",
            "x-real-ip": "177.68.49.85"
          },
          "params": {},
          "query": {},
          "body": {
            "id_canal": 5,
            "nome_canal": "GIG",
            "nova_ideia": [
              "ê enfrenta suas batalhas sozinho?\"\nAncoragem Bíblica:\nUsar Isaías 55:8-9 (\"Meus pensamentos não são os vossos pensamentos\") e a história de Ana orando pelo filho Samuel (1 Samuel 1) - ela orou por anos em silêncio aparente.\nNarrativa Exemplar:\nContar a história de Habacuque, que questionou Deus diretamente sobre por que suas orações pareciam não ser respondidas, mas depois entendeu que Deus estava preparando algo maior.\nAplicação:\nExplicar os sinais de que Deus está trabalhando mesmo quando parece silencioso:\n\nPaz inexplicável em meio ao caos\nPortas que se fecham para proteger\nPessoas certas aparecendo no momento certo\nForça para continuar quando deveria ter desistido\n\nDeclarações:\n\"Declaro que minhas orações subiram ao trono de Deus\"\n\"Declaro que o silêncio de Deus não é abandono, é preparação\"\n\"Declaro que a resposta está sendo moldada no céu\"\nOração Participativa:\nOração específica para quebrar o desânimo espiritual e renovar a fé na escuta divina.\nCTA + Elementos Obrigatórios:\n\nCompartilhar com 3 pessoas que precisam saber que Deus as ouve\nInscrever-se + contribuir pelo botão Valeu\nAssinatura: \"Eu sou Paul Davis, um mensageiro de Deus, e minha missão é ser luz. Que Deus abençoe abundantemente sua vida.\""
            ],
            "idioma": "English",
            "modelo": "GPT-5"
          },
          "webhookUrl": "https://autodark-n8n.tmtibo.easypanel.host/webhook/gerarRoteiro",
          "executionMode": "production"
        }
      }
    ]
  },
  "connections": {
    "Model Selector": {
      "ai_languageModel": [
        [
          {
            "node": "Gerador Guia Roteiro",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Gerador Prompt Titulo",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Gerador Thumb Prompt",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Sonnet-4": {
      "ai_languageModel": [
        [
          {
            "node": "Model Selector",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "GPT-5": {
      "ai_languageModel": [
        [
          {
            "node": "Model Selector",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "setData": {
      "main": [
        [
          {
            "node": "Gerador Prompt Titulo",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cria e Preenche Canal": {
      "main": [
        [
          {
            "node": "SetResponse",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gerador Guia Roteiro": {
      "main": [
        [
          {
            "node": "Define Saidas",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "setData1": {
      "main": [
        [
          {
            "node": "Atualiza DB",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Atualizar Prompt Roteiro": {
      "main": [
        [
          {
            "node": "setData1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Atualiza DB": {
      "main": [
        [
          {
            "node": "setPrompt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "setPrompt": {
      "main": [
        [
          {
            "node": "Respond Roteiro Atualizado",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Media Chars": {
      "main": [
        [
          {
            "node": "Gerador Thumb Prompt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "setDados3": {
      "main": [
        [
          {
            "node": "Salva DB",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "salvarRoteiro": {
      "main": [
        [
          {
            "node": "setDados3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gerador Prompt Titulo": {
      "main": [
        [
          {
            "node": "Media Chars",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gerar Prompts Guia": {
      "main": [
        [
          {
            "node": "setData",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Define Saidas": {
      "main": [
        [
          {
            "node": "Cria e Preenche Canal",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "4.1-mini1": {
      "ai_languageModel": [
        [
          {
            "node": "Model Selector",
            "type": "ai_languageModel",
            "index": 2
          }
        ]
      ]
    },
    "Gemini-2.5-Pro": {
      "ai_languageModel": [
        [
          {
            "node": "Model Selector",
            "type": "ai_languageModel",
            "index": 3
          }
        ]
      ]
    },
    "Gemini-2.5-Flash": {
      "ai_languageModel": [
        [
          {
            "node": "Model Selector",
            "type": "ai_languageModel",
            "index": 4
          }
        ]
      ]
    },
    "SetResponse": {
      "main": [
        [
          {
            "node": "Respond to Webhook1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Coleta Dados Canal1": {
      "main": [
        [
          {
            "node": "Create a folder",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Model Selector3": {
      "ai_languageModel": [
        [
          {
            "node": "Gerador de Roteiro1",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Gerar Título1",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Gera Texto Thumb1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "setData3": {
      "main": [
        [
          {
            "node": "Split Out1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gem-2.5-Flash1": {
      "ai_languageModel": [
        [
          {
            "node": "Model Selector3",
            "type": "ai_languageModel",
            "index": 4
          }
        ]
      ]
    },
    "Gem-2.5-Pro1": {
      "ai_languageModel": [
        [
          {
            "node": "Model Selector3",
            "type": "ai_languageModel",
            "index": 3
          }
        ]
      ]
    },
    "4.1-mini2": {
      "ai_languageModel": [
        [
          {
            "node": "Model Selector3",
            "type": "ai_languageModel",
            "index": 2
          }
        ]
      ]
    },
    "GPT-5²1": {
      "ai_languageModel": [
        [
          {
            "node": "Model Selector3",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Sonnet-4²1": {
      "ai_languageModel": [
        [
          {
            "node": "Model Selector3",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Gerador de Roteiro1": {
      "main": [
        [
          {
            "node": "Verifca Tamanho1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Cria Roteiro DB",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Gerador de Roteiro1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Verifca Tamanho1": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gerar Título1": {
      "main": [
        [
          {
            "node": "Gera Texto Thumb1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out1": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items2": {
      "main": [
        [
          {
            "node": "Responde Conteudo1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Gerar Título1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "setSaida": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create a folder": {
      "main": [
        [
          {
            "node": "setData3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "setGerarAudio": {
      "main": [
        [
          {
            "node": "[SUB] Gerar Áudio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cria Roteiro DB": {
      "main": [
        [
          {
            "node": "setGerarAudio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "[SUB] Gerar Áudio": {
      "main": [
        [
          {
            "node": "setSaida",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Excluir Roteiro": {
      "main": [
        [
          {
            "node": "Coleta Info Roteiro",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Deleta Audio Bucket": {
      "main": [
        [
          {
            "node": "Deleta Roteiro",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Coleta Info Roteiro": {
      "main": [
        [
          {
            "node": "Deleta Audio Bucket",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Deleta Roteiro": {
      "main": [
        [
          {
            "node": "Respond to Webhook2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Coleta Dados Canal": {
      "main": [
        [
          {
            "node": "setData2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Model Selector2": {
      "ai_languageModel": [
        [
          {
            "node": "Gerador de Roteiro",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Gerar Título",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Gera Texto Thumb",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "setData2": {
      "main": [
        [
          {
            "node": "Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gem-2.5-Flash": {
      "ai_languageModel": [
        [
          {
            "node": "Model Selector2",
            "type": "ai_languageModel",
            "index": 4
          }
        ]
      ]
    },
    "Gem-2.5-Pro": {
      "ai_languageModel": [
        [
          {
            "node": "Model Selector2",
            "type": "ai_languageModel",
            "index": 3
          }
        ]
      ]
    },
    "4.1-mini": {
      "ai_languageModel": [
        [
          {
            "node": "Model Selector2",
            "type": "ai_languageModel",
            "index": 2
          }
        ]
      ]
    },
    "GPT-5²": {
      "ai_languageModel": [
        [
          {
            "node": "Model Selector2",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Sonnet-4²": {
      "ai_languageModel": [
        [
          {
            "node": "Model Selector2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Gerador de Roteiro": {
      "main": [
        [
          {
            "node": "Verifca Tamanho",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Preenche DB",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Gerador de Roteiro",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Verifca Tamanho": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gerar Título": {
      "main": [
        [
          {
            "node": "Gera Texto Thumb",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "setResponse": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gerar Roteiro": {
      "main": [
        [
          {
            "node": "Coleta Dados Canal",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gerar Conteudo": {
      "main": [
        [
          {
            "node": "Coleta Dados Canal1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Responde Conteudo",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Gerar Título",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Preenche DB": {
      "main": [
        [
          {
            "node": "setResponse",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Atualizar Conteudo": {
      "main": [
        [
          {
            "node": "Setar Conteudo Editado",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Setar Conteudo Editado": {
      "main": [
        [
          {
            "node": "Atualiza Conteudo",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Atualiza Conteudo": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gerar Áudio": {
      "main": [
        [
          {
            "node": "Lista IDs Roteiros",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Lista IDs Roteiros": {
      "main": [
        [
          {
            "node": "Splita IDs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Roteiros": {
      "main": [
        [
          {
            "node": "Respond Gerar Áudio",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Coleta Info Roteiro1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Splita IDs": {
      "main": [
        [
          {
            "node": "Loop Roteiros",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Coleta Info Roteiro1": {
      "main": [
        [
          {
            "node": "Coleta Info Canal",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Coleta Info Canal": {
      "main": [
        [
          {
            "node": "setAudio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "setAudio": {
      "main": [
        [
          {
            "node": "[SUB] Gerar Áudio1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "[SUB] Gerar Áudio1": {
      "main": [
        [
          {
            "node": "Loop Roteiros",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gerador Thumb Prompt": {
      "main": [
        [
          {
            "node": "Gerador Guia Roteiro",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gera Texto Thumb1": {
      "main": [
        [
          {
            "node": "Gerador de Roteiro1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gera Texto Thumb": {
      "main": [
        [
          {
            "node": "Gerador de Roteiro",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "039b38dc-03e6-4a98-b512-1b626e0cb201",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "c6fbb6bd9dd871ca93aa227002d9065607edffcef72444963c91c9c146b6ac39"
  },
  "id": "EBasKXZKyeKT9dPM",
  "tags": []
}